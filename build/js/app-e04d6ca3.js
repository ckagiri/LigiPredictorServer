/**
 * LigiPredictorServer - Ligi Predictor Server
 * @authors 
 * @version v1.0.0
 * @link https://github.com/ckagiri/LigiPredictorServer#readme
 * @license ISC
 */
function naturalSort(e,t,r){var a,o,n=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,u=/^0/,r=r||{},l=function(e){return r.insensitive&&(""+e).toLowerCase()||""+e},d=l(e).replace(s,"")||"",p=l(t).replace(s,"")||"",h=d.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=p.replace(n,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(d.match(c))||1!=h.length&&d.match(i)&&Date.parse(d),g=parseInt(p.match(c))||m&&p.match(i)&&Date.parse(p)||null,v=r.desc?-1:1;if(g){if(m<g)return-1*v;if(m>g)return 1*v}for(var y=0,b=Math.max(h.length,f.length);y<b;y++){if(a=!(h[y]||"").match(u)&&parseFloat(h[y])||h[y]||0,o=!(f[y]||"").match(u)&&parseFloat(f[y])||f[y]||0,isNaN(a)!==isNaN(o))return isNaN(a)?1:-1;if(typeof a!=typeof o&&(a+="",o+=""),a<o)return-1*v;if(a>o)return 1*v}return 0}var app;!function(e){"use strict";angular.module("app",["app.core","app.directives","app.layout","app.auth","admin.leagues","admin.seasons","admin.fixtures","admin.teams","admin.users","app.matches","app.predictions","app.leaderboards","app.rules","app.whatif","app.stats"])}(app||(app={}));var admin;!function(e){var t;!function(e){"use strict";angular.module("admin.fixtures",["app.core"])}(t=e.fixtures||(e.fixtures={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";angular.module("admin.leagues",["app.core"])}(t=e.leagues||(e.leagues={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";angular.module("admin.seasons",["app.core"])}(t=e.seasons||(e.seasons={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";angular.module("admin.teams",["app.core"])}(t=e.teams||(e.teams={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";angular.module("admin.users",["app.core"])}(t=e.users||(e.users={}))}(admin||(admin={}));var app;!function(e){var t;!function(e){"use strict";function t(e){e.google({clientId:"878230370671-k3ves4plp9gl7l9fvpvr3pse3mok0f9q.apps.googleusercontent.com"}),e.facebook({clientId:"1895048740742132"})}function r(e){e.prepareUser()}e.redirect="name",t.$inject=["$authProvider"],r.$inject=["securityService"],angular.module("app.auth",["app.core"]).config(t).value("redirectToUrlAfterLogin",{url:"/"}).run(r)}(t=e.auth||(e.auth={}))}(app||(app={}));var blocks;!function(e){var t;!function(e){"use strict";angular.module("blocks.exception",["blocks.logger"])}(t=e.exception||(e.exception={}))}(blocks||(blocks={}));var blocks;!function(e){var t;!function(e){"use strict";angular.module("blocks.logger",[])}(t=e.logger||(e.logger={}))}(blocks||(blocks={}));var blocks;!function(e){var t;!function(e){"use strict";angular.module("blocks.router",[])}(t=e.router||(e.router={}))}(blocks||(blocks={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","ui.router","blocks.exception","blocks.logger","blocks.router","ngplus","ngMessages","satellizer","nvd3","ui.bootstrap"])}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.layout",["app.core"])}(t=e.layout||(e.layout={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.leaderboards",["app.core"])}(t=e.leaderboards||(e.leaderboards={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.matches",["app.core"])}(t=e.matches||(e.matches={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.predictions",["app.core"])}(t=e.predictions||(e.predictions={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.rules",["app.core"])}(t=e.rules||(e.rules={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.stats",["app.core"])}(t=e.stats||(e.stats={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.user",["app.core"])}(t=e.user||(e.user={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.whatif",["app.core"])}(t=e.whatif||(e.whatif={}))}(app||(app={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.fixture=t,this.logger=r,this.title="Fixture"}return e.$inject=["$q","fixture","logger"],e}();t.$inject=["$q","fixture","logger"],e.FixtureDetailController=t,angular.module("admin.fixtures").controller("FixtureDetailController",t)}(t=e.fixtures||(e.fixtures={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.fixtures=t,this.logger=r,this.title="Fixtures"}return e.$inject=["$q","fixtures","logger"],e}();t.$inject=["$q","fixtures","logger"],e.FixturesController=t,angular.module("admin.fixtures").controller("FixturesController",t)}(t=e.fixtures||(e.fixtures={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"admin.fixtures",config:{url:"/leagues/:leagueId/seasons/:seasonId/rounds/:roundId/fixtures",templateUrl:"app/admin/fixtures/fixtures.html",controller:"FixturesController",controllerAs:"vm",title:"fixtures",resolve:{fixtures:["$stateParams","FixturesResource",function(e,t){var r=e.leagueId,a=e.seasonId,o=e.roundId;return t.forRound(r,a,o)}]}}},{state:"admin.fixtures-alt",config:{url:"/fixtures?league&season&round",templateUrl:"app/admin/fixtures/fixtures.html",controller:"FixturesController",controllerAs:"vm",title:"fixtures",resolve:{fixtures:["$stateParams","FixturesResource",function(e,t){var r=e.league,a=e.season,o=e.round;return t.forRound(r,a,o)}]}}},{state:"admin.fixture-detail",config:{url:"/leagues/:leagueId/seasons/:seasonId/rounds/:roundId/fixtures/:fixtureId",templateUrl:"app/admin/fixtures/fixtures.html",controller:"FixturesController",controllerAs:"vm",title:"fixtures",resolve:{fixtures:["$stateParams","FixturesResource",function(e,t){var r=e.leagueId,a=e.seasonId,o=e.roundId,n=e.fixtureId;return t.getOne(r,a,o,n)}]}}}]}angular.module("admin.fixtures").run(t),t.$inject=["routerHelper"]}(t=e.fixtures||(e.fixtures={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.league=t,this.logger=r,this.title="League"}return e.$inject=["$q","league","logger"],e}();t.$inject=["$q","league","logger"],e.LeagueDetailController=t,angular.module("admin.leagues").controller("LeagueDetailController",t)}(t=e.leagues||(e.leagues={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.leagues=t,this.logger=r,this.title="Leagues"}return e.$inject=["$q","leagues","logger"],e}();t.$inject=["$q","leagues","logger"],e.LeaguesController=t,angular.module("admin.leagues").controller("LeaguesController",t)}(t=e.leagues||(e.leagues={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"admin.leagues",config:{url:"/leagues",templateUrl:"app/admin/leagues/leagues.html",controller:"LeaguesController",controllerAs:"vm",title:"leagues",resolve:{leagues:["LeaguesResource",function(e){return e.all()}]}}},{state:"admin.league-detail",config:{url:"/leagues/:leagueId",templateUrl:"app/admin/leagues/league-detail.html",controller:"LeagueDetailController",controllerAs:"vm",title:"League",resolve:{league:["$stateParams","LeaguesResource",function(e,t){return t.getById(e.leagueId)}]}}}]}angular.module("admin.leagues").run(t),t.$inject=["routerHelper"]}(t=e.leagues||(e.leagues={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.season=t,this.logger=r,this.title="Season"}return e.$inject=["$q","season","logger"],e}();t.$inject=["$q","season","logger"],e.SeasonDetailController=t,angular.module("admin.seasons").controller("SeasonDetailController",t)}(t=e.seasons||(e.seasons={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$stateParams=e,this.rounds=t,this.logger=r,this.title="Rounds",this.leagueId=this.$stateParams.leagueId,this.seasonId=this.$stateParams.seasonId}return e.$inject=["$stateParams","rounds","logger"],e}();t.$inject=["$stateParams","rounds","logger"],e.SeasonRoundsController=t,angular.module("admin.seasons").controller("SeasonRoundsController",t)}(t=e.seasons||(e.seasons={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.teams=t,this.logger=r,this.title="Teans"}return e.$inject=["$q","teams","logger"],e}();t.$inject=["$q","teams","logger"],e.SeasonTeamsController=t,angular.module("admin.seasons").controller("SeasonTeamsController",t)}(t=e.seasons||(e.seasons={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$stateParams=e,this.seasons=t,this.logger=r,this.title="Seasons",this.leagueId=this.$stateParams.leagueId}return e.$inject=["$stateParams","seasons","logger"],e}();t.$inject=["$stateParams","seasons","logger"],e.SeasonsController=t,angular.module("admin.seasons").controller("SeasonsController",t)}(t=e.seasons||(e.seasons={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"admin.seasons",config:{url:"/leagues/:leagueId/seasons",templateUrl:"app/admin/seasons/seasons.html",controller:"SeasonsController",controllerAs:"vm",title:"seasons",resolve:{seasons:["$stateParams","SeasonsResource",function(e,t){return t.forLeague(e.leagueId)}]}}},,{state:"admin.season-detail",config:{url:"/leagues/:leagueId/seasons/:seasonId",templateUrl:"app/admin/seasons/season-detail.html",controller:"SeasonDetailController",controllerAs:"vm",title:"Season",resolve:{season:["$stateParams","SeasonsResource",function(e,t){var r=e.leagueId,a=e.seasonId;return t.getOne(r,a)}]}}},{state:"admin.season-fixtures",config:{url:"/leagues/:leagueId/seasons/:seasonId/fixtures?round",templateUrl:"app/admin/fixtures/fixtures.html",controller:"FixturesController",controllerAs:"vm",title:"season-Fixtures",resolve:{fixtures:["$stateParams","FixturesResource",function(e,t){var r=e.leagueId,a=e.seasonId,o=e.round;return t.forRound(r,a,o)}]}}},{state:"admin.season-rounds",config:{url:"/leagues/:leagueId/seasons/:seasonId/rounds",templateUrl:"app/admin/seasons/season-rounds.html",controller:"SeasonRoundsController",controllerAs:"vm",title:"season-Rounds",resolve:{rounds:["$stateParams","RoundsResource",function(e,t){var r=e.leagueId,a=e.seasonId;return t.forSeason(r,a)}]}}},{state:"admin.season-round-fixtures",config:{url:"/leagues/:leagueId/seasons/:seasonId/rounds/:roundId/fixtures",templateUrl:"app/admin/fixtures/fixtures.html",controller:"FixturesController",controllerAs:"vm",title:"season-Fixtures",resolve:{fixtures:["$stateParams","FixturesResource",function(e,t){var r=e.leagueId,a=e.seasonId,o=e.roundId;return t.forRound(r,a,o)}]}}},{state:"admin.season-teams",config:{url:"/leagues/:leagueId/seasons/:seasonId/teams",templateUrl:"app/admin/seasons/season-teams.html",controller:"SeasonTeamsController",controllerAs:"vm",title:"season-Teams",resolve:{teams:["$stateParams","TeamsResource",function(e,t){var r=e.leagueId,a=e.seasonId;return t.forSeason(r,a)}]}}}]}angular.module("admin.seasons").run(t),t.$inject=["routerHelper"]}(t=e.seasons||(e.seasons={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.team=t,this.logger=r,this.title="Team"}return e.$inject=["$q","team","logger"],e}();t.$inject=["$q","team","logger"],e.TeamDetailController=t,angular.module("admin.teams").controller("TeamDetailController",t)}(t=e.teams||(e.teams={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.teams=t,this.logger=r,this.title="Teans"}return e.$inject=["$q","teams","logger"],e}();t.$inject=["$q","teams","logger"],e.TeamMatchesController=t,angular.module("admin.teams").controller("TeamMatchesController",t)}(t=e.teams||(e.teams={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.teams=t,this.logger=r,this.title="Teans"}return e.$inject=["$q","teams","logger"],e}();t.$inject=["$q","teams","logger"],e.TeamsController=t,angular.module("admin.teams").controller("TeamsController",t)}(t=e.teams||(e.teams={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"admin.teams",config:{url:"/teams",templateUrl:"app/admin/teams/teams.html",controller:"TeamsController",controllerAs:"vm",title:"teams",resolve:{teams:["$stateParams","TeamsResource",function(e,t){return t.all()}]}}},{state:"admin.team-edit",config:{url:"/teams/:teamId",templateUrl:"app/admin/teams/team-detail.html",controller:"TeamsController",controllerAs:"vm",title:"teams",resolve:{teams:["$stateParams","TeamsResource",function(e,t){return t.getById(e.teamId)}]}}},{state:"admin.team-matches",config:{url:"/teams/:teamId/matches",templateUrl:"app/admin/teams/team-matches.html",controller:"TeamMatchesController",controllerAs:"vm",title:"teams",resolve:{teams:["$stateParams","FixturesResource",function(e,t){var r=e.leagueId,a=e.seasonId,o=e.teamId;return t.forTeam(r,a,o)}]}}}]}angular.module("admin.teams").run(t),t.$inject=["routerHelper"]}(t=e.teams||(e.teams={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.users=t,this.logger=r,this.title="Users"}return e.$inject=["$q","users","logger"],e}();t.$inject=["$q","users","logger"],e.UsersController=t,angular.module("admin.users").controller("UsersController",t)}(t=e.users||(e.users={}))}(admin||(admin={}));var admin;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"admin.users",config:{url:"/users",templateUrl:"app/admin/users/users.html",controller:"UsersController",controllerAs:"vm",title:"users",resolve:{users:["$stateParams","UsersResource",function(e,t){return t.all()}]}}},{state:"admin.user-detail",config:{url:"/users/:id",templateUrl:"app/admin/users/users.html",controller:"UsersController",controllerAs:"vm",title:"users",resolve:{users:["$stateParams","UsersResource",function(e,t){return t.getById(e.id)}]}}}]}angular.module("admin.users").run(t),t.$inject=["routerHelper"]}(t=e.users||(e.users={}))}(admin||(admin={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"xapp.login",config:{url:"/login",templateUrl:"app/auth/login.html",controller:"LoginController",controllerAs:"vm",title:"login"}},{state:"xapp.signup",config:{url:"/signup",templateUrl:"app/auth/signup.html",controller:"SignupController",controllerAs:"vm",title:"Signup"}}]}angular.module("app.auth").run(t),t.$inject=["routerHelper"]}(t=e.auth||(e.auth={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a,o){this.security=e,this.$location=t,this.$q=r,this.$state=a,this.logger=o,this.title="Login"}return e.$inject=["security","$location","$q","$state","logger"],e.prototype.login=function(){var e=this;this.security.login(this.user).then(function(){e.logger.success("You have successfully signed in!")})["catch"](function(t){e.logger.error(t.data.message,t.status)})},e.prototype.authenticate=function(e){var t=this;this.security.authenticate(e)["catch"](function(e){e.message?t.logger.error(e.message):e.data?t.logger.error(e.data.message,e.status):t.logger.error(e)})},e}();t.$inject=["securityService","$location","$q","$state","logger"],e.LoginController=t,angular.module("app.auth").controller("LoginController",t)}(t=e.auth||(e.auth={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.$log=e,this.$q=t,this.retryQueue=[],this.onItemAddedCallbacks=[]}return e.$inject=["$log","$q"],e.prototype.hasMore=function(){return this.retryQueue.length>0},e.prototype.push=function(e){var t=this;this.retryQueue.push(e),angular.forEach(this.onItemAddedCallbacks,function(r){try{r(e)}catch(a){t.$log.error("securityRetryQueue.push(retryItem): callback threw an error"+a)}})},e.prototype.pushRetryFn=function(e,t){1===arguments.length&&(t=e,e=void 0);var r=this.$q.defer(),a={reason:e,retry:function(){this.$q.when(t()).then(function(e){r.resolve(e)},function(e){r.reject(e)})},cancel:function(){r.reject()}};return this.push(a),r.promise},e.prototype.retryReason=function(){return this.hasMore()&&this.retryQueue[0].reason},e.prototype.cancelAll=function(){for(;this.hasMore();)this.retryQueue.shift().cancel()},e.prototype.retryAll=function(){for(;this.hasMore();)this.retryQueue.shift().retry()},e.prototype.clear=function(){this.retryQueue=[]},e}();t.$inject=["$log","$q"],angular.module("app.auth").service("retryQueue",t)}(t=e.auth||(e.auth={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a,o,n,s,i){var c=this;this.$auth=e,this.$http=t,this.$location=r,this.$q=a,this.$state=o,this.storage=n,this.redirectToUrlAfterLogin=s,this.queue=i,this.currentUser=null,this.queue.onItemAddedCallbacks.push(function(e){i.hasMore()&&(c.saveAttemptUrl(),c.redirect("/login"))})}return e.$inject=["$auth","$http","$location","$q","$state","storage","redirectToUrlAfterLogin","queue"],e.prototype.login=function(e){var t=this,r=this.$auth.login(e);return r.then(function(e){t.saveUser(e.data.user),t.isAuthenticated()&&t.queue.clear(),t.redirectToAttemptedUrl()})},e.prototype.logout=function(e){var t=this;return this.$auth.logout().then(function(){t.clearUser(),t.redirect(e)})},e.prototype.signup=function(e){var t=this;return this.$auth.signup(e).then(function(e){t.saveUser(e.data.user),t.redirect()})},e.prototype.authenticate=function(e){var t=this;return this.$auth.authenticate(e).then(function(e){t.saveUser(e.data.user),t.isAuthenticated()&&t.queue.clear(),t.redirectToAttemptedUrl()})},e.prototype.requestCurrentUser=function(){return this.$q.when(this.currentUser)},e.prototype.isAuthenticated=function(){return!!this.currentUser},e.prototype.isAdmin=function(){return!!this.currentUser&&!!~this.currentUser.roles.indexOf("admin")},e.prototype.requireAdminUser=function(){var e=this,t=this.requestCurrentUser().then(function(t){if(!e.isAuthenticated())return e.queue.pushRetryFn("unauthorized-client",e.requireAdminUser)});return t},e.prototype.requireAuthenticatedUser=function(){var e=this,t=this.requestCurrentUser().then(function(){if(!e.isAuthenticated())return e.queue.pushRetryFn("unauthenticated-client",e.requireAuthenticatedUser)});return t},e.prototype.saveAttemptUrl=function(){"/login"!=this.$location.path().toLowerCase()&&(this.redirectToUrlAfterLogin.url=this.$location.path())},e.prototype.redirectToAttemptedUrl=function(){this.redirect(this.redirectToUrlAfterLogin.url)},e.prototype.prepareUser=function(e){var t=e||this.storage.getItem("user");return t&&(this.currentUser=t,this.isAuthenticated()&&this.queue.clear()),this.isAuthenticated()},e.prototype.saveUser=function(e){this.storage.setItem("user",e),this.prepareUser(e)},e.prototype.clearUser=function(){this.storage.removeItem("user"),this.currentUser=null},e.prototype.redirect=function(e){e=e||"/",this.$location.path(e)},e}();t.$inject=["$auth","$http","$location","$q","$state","localstorage","redirectToUrlAfterLogin","retryQueue"],e.SecurityService=t,angular.module("app.auth").service("securityService",t)}(t=e.auth||(e.auth={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a){this.security=e,this.$q=t,this.$state=r,this.logger=a,this.title="Signup"}return e.$inject=["security","$q","$state","logger"],e.prototype.signup=function(){var e=this;this.security.signup(this.user).then(function(){e.logger.info("You have successfully created a new account and have been signed-in")})["catch"](function(t){e.logger.error(t.data.message)})},e}();t.$inject=["securityService","$q","$state","logger"],e.SignupController=t,angular.module("app.auth").controller("SignupController",t)}(t=e.auth||(e.auth={}))}(app||(app={}));var blocks;!function(e){var t;!function(e){"use strict";function t(e){e.decorator("$exceptionHandler",r)}function r(e,t,r){return function(a,o){var n=t.config.appErrorPrefix||"",s={exception:a,cause:o};a.message=n+a.message,e(a,o),r.error(a.message,s)}}var a=function(){function e(){var e=this;this.config={appErrorPrefix:void 0},this.$get=function(){return{config:e.config}}}return e.prototype.configure=function(e){this.config.appErrorPrefix=e},e}();a.$inject=[],e.ExceptionHandlerProvider=a,t.$inject=["$provide"],r.$inject=["$delegate","exceptionHandler","logger"],angular.module("blocks.exception").provider("exceptionHandler",a).config(t)}(t=e.exception||(e.exception={}))}(blocks||(blocks={}));var blocks;!function(e){var t;!function(e){"use strict";var t=function(){function e(e){var t=this;this.logger=e,this.catcher=function(e){return function(r){return t.logger.error(e,r)}}}return e.$inject=["logger"],e}();t.$inject=["logger"],e.Exception=t,angular.module("blocks.exception").service("exception",t)}(t=e.exception||(e.exception={}))}(blocks||(blocks={}));var blocks;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.$log=e,this.toastr=t}return e.$inject=["$log","toastr"],e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.$log.log(e)},e.prototype.error=function(e,t,r){this.toastr.error(e,r),this.$log.error("Error: "+e,"\nSummary:",r,"\nDetails:",t)},e.prototype.info=function(e,t,r){this.toastr.info(e,r),this.$log.info("Info: "+e,"\nSummary:",r,"\nDetails:",t)},e.prototype.success=function(e,t,r){this.toastr.success(e,r),this.$log.info("Success: "+e,"\nSummary:",r,"\nDetails:",t)},e.prototype.warning=function(e,t,r){this.toastr.warning(e,r),this.$log.warn("Warning: "+e,"\nSummary:",r,"\nDetails:",t)},e}();t.$inject=["$log","toastr"],e.Logger=t,angular.module("blocks.logger").service("logger",t)}(t=e.logger||(e.logger={}))}(blocks||(blocks={}));var blocks;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$locationProvider=e,this.$stateProvider=t,this.$urlRouterProvider=r,this.config={docTitle:"",resolveAlways:{}},this.$locationProvider.html5Mode(!0),this.$urlRouterProvider.when("","/"),this.$get.$inject=["$injector","$location","$rootScope","$state","logger"]}return e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],e.prototype.configure=function(e){angular.extend(this.config,e)},e.prototype.$get=function(e,t,r,a,o){function n(){i(),c(),u(),d()}function s(e){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},f.resolveAlways),p.state(e.state,e.config)})}function i(){function e(e,t){t(function(){e.go("app.index",null,{reload:!0})},500)}function t(e){e.go("app.404")}var r="/404";h.otherwise(r),e.$inject=["$state","$timeout"],t.$inject=["$state"],h.when("/",e),h.when("/404",t)}function c(){r.$on("$stateChangeError",function(e,r,a,n,s,i){if(!m){g.errors++,m=!0;var c=r&&(r.title||r.name||r.loadedTemplateUrl)||"unknown target",u="Error routing to "+c+". "+(i.data||"")+". <br/>"+(i.statusText||"")+": "+(i.status||"");o.warning(u,[r],""),t.path("/")}})}function u(){r.$on("$stateChangeSuccess",function(e,t,a,o,n,s){g.changes++,m=!1;var i=t.title||"";r.title=i}),r.$on("$stateChangeSuccess",function(){setTimeout(function(){window.scrollTo(0,0)},50)}),r.$on("$stateChangeSuccess",function(){var r,a=e.get("breadcrumbs"),o=t.path().split("/"),n=[],s=function(e){return"/"+o.slice(0,e+1).join("/")};for(o.shift(),r=0;r<o.length;r++)n.push({name:o[r]||"home",path:s(r)});a.setAll(n)})}function l(){return a.get()}function d(){r.$on("$stateChangeSuccess",function(e,t,a,o,n){g.changes++,m=!1;var s=f.docTitle+" "+(t.title||"");r.title=s})}var p=this.$stateProvider,h=(this.$locationProvider,this.$urlRouterProvider),f=this.config,m=!1,g={errors:0,changes:0},v={configureStates:s,getStates:l,stateCounts:g};return n(),v},e}();t.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"],e.RouterHelperProvider=t,angular.module("blocks.router").provider("routerHelper",t)}(t=e.router||(e.router={}))}(blocks||(blocks={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.breadcrumbs=[]}return e.prototype.getAll=function(){return this.breadcrumbs},e.prototype.setAll=function(e){this.breadcrumbs=e},e.prototype.getFirst=function(){return this.breadcrumbs[0]||{}},e}();e.BreadcrumbsService=t,angular.module("app.core").service("breadcrumbs",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e){this.$cacheFactory=e,this.expires=void 0,this.store=null,this.store=this.$cacheFactory("store")}return e.$inject=["$cacheFactory"],e.prototype.clear=function(e){return this.store.put(e,null)},e.prototype.get=function(e){return this.store.get(e)},e.prototype.put=function(e,t){return this.store.put(e,t)},e.prototype.info=function(){return this.store.info()},e}();t.$inject=["$cacheFactory"],e.CacheService=t,angular.module("app.core").service("cache",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e){this.localStorage=e.localStorage}return e.$inject=["$window"],e.prototype.getItem=function(e){return JSON.parse(this.localStorage.getItem(e))},e.prototype.setItem=function(e,t){return this.localStorage.setItem(e,JSON.stringify(t)),!0},e.prototype.removeItem=function(e){return this.localStorage.removeItem(e),!0},e}();t.$inject=["$window"],e.LocalStorageService=t,angular.module("app.core").service("localstorage",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.prototype.sort_by=function(e,t){return function(r,a){var o=r[e],n=a[e];return naturalSort(o,n,{insensitive:!0,desc:!!t})}},e}();e.SortService=t,angular.module("app.core").service("sort",t)}(t=e.core||(e.core={}))}(app||(app={})),function(){"use strict";function e(e,t,r,a){function o(){return t.$broadcast.apply(t,arguments)}function n(e,t){return e&&-1!==e.toLowerCase().indexOf(t.toLowerCase())}function s(e){return/^[-]?\d+$/.test(e)}var i={$broadcast:o,$q:e,$timeout:r,logger:a,textContains:n,isNumber:s};return i}angular.module("app.core").factory("util",e),e.$inject=["$q","$rootScope","$timeout","logger"]}();var app;!function(e){var t;!function(e){"use strict";function t(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function r(e,t,r){e.debugEnabled&&e.debugEnabled(!0),t.configure(a.appErrorPrefix),r.configure({docTitle:"LP: ",resolveAlways:{}})}var a={appErrorPrefix:"[Ligi:Error] ",appTitle:"Ligi Predictor",baseUrl:""};angular.module("app.core").config(t).config(r).value("config",a),t.$inject=["toastr"],r.$inject=["$logProvider","exceptionHandlerProvider","routerHelperProvider"]}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment),angular.module("app.core").factory("_",["$window",function(e){return e._}])}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"xapp",config:{"abstract":!0,views:{shell:{templateUrl:"app/layout/shell.out.html"}}}},{state:"xapp.404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}},{state:"admin",config:{"abstract":!0,url:"/admin",views:{shell:{templateUrl:"app/layout/shell.in.html"}},resolve:{admin:["securityService",function(e){return e.requireAdminUser()}]}}},{state:"admin.index",config:{url:"",templateUrl:"app/admin/leagues/leagues.html",controller:"LeaguesController",controllerAs:"vm",title:"leagues",resolve:{leagues:["LeaguesResource",function(e){return e.all()}]}}},{state:"admin.404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}},{state:"app",url:"/",config:{"abstract":!0,views:{shell:{templateUrl:"app/layout/shell.in.html"}}}},{state:"app.index",config:{url:"/matches?league&season&round",templateUrl:"app/matches/matches.html",controller:"MatchesController",controllerAs:"vm",title:"matches",resolve:{season:["$stateParams","SeasonsResource",function(e,t){var r=e.league,a=e.season;return null!=r&&null!=a?t.getOne(r,a):t["default"]()}],matches:["$stateParams","MatchesResource",function(e,t){var r=e.league,a=e.season,o=e.round;return null!=r&&null!=a&&null!=o?t.forRound(r,a,o):t["default"]()}]}}},{state:"app.404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}angular.module("app.core").run(t),t.$inject=["routerHelper"]}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.directives",[])}(t=e.directives||(e.directives={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.require="ngModel",this.scope={otherModelValue:"=lpPasswordMatch"}}return e.instance=function(){return new e},e.prototype.link=function(e,t,r,a){a.$validators.compareTo=function(t){return t===e.otherModelValue},e.$watch("otherModelValue",function(){a.$validate()})},e}();t.$inject=[""],angular.module("app.directives").directive("lpPasswordMatch",t.instance)}(t=e.directives||(e.directives={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.restrict="A",this.require="ngModel",this.template='<span class="password-strength-indicator"><span></span><span></span><span></span><span></span></span>',this.link=this.linkFn}return e.instance=function(){return new e},e.prototype.linkFn=function(e,t,r,a){var o=t.children(),n=Array.prototype.slice.call(o.children()),s=n.slice(-1)[0],i=n.slice(-2),c=n.slice(-3),u=n.slice(-4);t.after(o),t.bind("keyup",function(){var e,t={positive:{},negative:{}},r={positive:{},negative:{}},o=0;angular.forEach(n,function(e){e.style.backgroundColor="#ebeef1"}),a.$viewValue&&(t.positive.lower=a.$viewValue.match(/[a-z]/g),t.positive.upper=a.$viewValue.match(/[A-Z]/g),t.positive.numbers=a.$viewValue.match(/\d/g),t.positive.symbols=a.$viewValue.match(/[$-\/:-?{-~!^_`\[\]]/g),t.positive.middleNumber=a.$viewValue.slice(1,-1).match(/\d/g),t.positive.middleSymbol=a.$viewValue.slice(1,-1).match(/[$-\/:-?{-~!^_`\[\]]/g),r.positive.lower=t.positive.lower?t.positive.lower.length:0,r.positive.upper=t.positive.upper?t.positive.upper.length:0,r.positive.numbers=t.positive.numbers?t.positive.numbers.length:0,r.positive.symbols=t.positive.symbols?t.positive.symbols.length:0,r.positive.numChars=a.$viewValue.length,e+=r.positive.numChars>=8?1:0,r.positive.requirements=e>=3?e:0,r.positive.middleNumber=t.positive.middleNumber?t.positive.middleNumber.length:0,r.positive.middleSymbol=t.positive.middleSymbol?t.positive.middleSymbol.length:0,t.negative.consecLower=a.$viewValue.match(/(?=([a-z]{2}))/g),t.negative.consecUpper=a.$viewValue.match(/(?=([A-Z]{2}))/g),t.negative.consecNumbers=a.$viewValue.match(/(?=(\d{2}))/g),t.negative.onlyNumbers=a.$viewValue.match(/^[0-9]*$/g),t.negative.onlyLetters=a.$viewValue.match(/^([a-z]|[A-Z])*$/g),r.negative.consecLower=t.negative.consecLower?t.negative.consecLower.length:0,r.negative.consecUpper=t.negative.consecUpper?t.negative.consecUpper.length:0,r.negative.consecNumbers=t.negative.consecNumbers?t.negative.consecNumbers.length:0,
o+=4*r.positive.numChars,r.positive.upper&&(o+=2*(r.positive.numChars-r.positive.upper)),r.positive.lower&&(o+=2*(r.positive.numChars-r.positive.lower)),(r.positive.upper||r.positive.lower)&&(o+=4*r.positive.numbers),o+=6*r.positive.symbols,o+=2*(r.positive.middleSymbol+r.positive.middleNumber),o+=2*r.positive.requirements,o-=2*r.negative.consecLower,o-=2*r.negative.consecUpper,o-=2*r.negative.consecNumbers,t.negative.onlyNumbers&&(o-=r.positive.numChars),t.negative.onlyLetters&&(o-=r.positive.numChars),o=Math.max(0,Math.min(100,Math.round(o))),o>85?angular.forEach(u,function(e){e.style.backgroundColor="#008cdd"}):o>65?angular.forEach(c,function(e){e.style.backgroundColor="#6ead09"}):o>30?angular.forEach(i,function(e){e.style.backgroundColor="#e09115"}):s.style.backgroundColor="#e01414")})},e}();t.$inject=[""],angular.module("app.directives").directive("lpPasswordStrength",t.instance)}(t=e.directives||(e.directives={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.bindToController=!0,this.controller=r,this.controllerAs="vm",this.restrict="EA",this.scope={navline:"="},this.templateUrl="app/layout/lp-top-nav.html"}return e.instance=function(){return new e},e.prototype.link=function(e,t,r){},e}();t.$inject=[""];var r=function(){function e(e,t,r){this.$state=e,this.logger=t,this.security=r}return e.prototype.isAuthenticated=function(){return this.security.isAuthenticated()},e.prototype.isAdmin=function(){return this.security.isAdmin()},e.prototype.logout=function(){var e=this;this.security.isAuthenticated()&&this.security.logout().then(function(){e.logger.info("You have been logged out")})},e.prototype.userName=function(){var e=this.security.currentUser||{displayName:"User"};return e.displayName},e.prototype.isCurrent=function(e){var t=this.$state.current;if(!e.title||!t||!t.title)return"";var r=e.title;return t.title.substr(0,r.length)===r?"current":""},e.prototype.isNavbarActive=function(e){return!0},e}();r.$inject=["$state","logger","securityService"],angular.module("app.layout").directive("lpTopNav",t.instance)}(t=e.layout||(e.layout={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a,o,n){this.$rootScope=e,this.$timeout=t,this.breadcrumbs=r,this.config=a,this.logger=o,this.security=n,this.logger.success(a.appTitle+" loaded!",null)}return e.$inject=["$rootScope","$timeout","breadcrumbs","config","logger","security"],e.prototype.isAdmin=function(){return this.security.isAdmin()},e}();t.$inject=["$rootScope","$timeout","breadcrumbs","config","logger","securityService"],e.ShellController=t,angular.module("app.layout").controller("ShellController",t)}(t=e.layout||(e.layout={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a){var o=this;this.$http=e,this.$q=t,this.exception=r,this.logger=a,this.success=function(e){return e.data},this.fail=function(e){var t=e.data.description,r="query for leaderboard failed.";return o.exception.catcher(t)(r),o.$q.reject(t)}}return e.$inject=["$http","$q","exception","logger"],e.prototype.getSeasonLeaderboard=function(e,t){return this.$http.get("/api/leaderboard/league/"+e+"/season/"+t).then(this.success)["catch"](this.fail)},e.prototype.getSeasonRoundLeaderboard=function(e,t,r){return this.$http.get("/api/leaderboard/league/"+e+"/season/"+t+"/round/"+r).then(this.success)["catch"](this.fail)},e.prototype.getSeasonMonthLeaderboard=function(e,t,r,a){return this.$http.get("/api/leaderboard/league/"+e+"/season/"+t+"/year/"+r+"/month/"+a).then(this.success)["catch"](this.fail)},e}();t.$inject=["$http","$q","exception","logger"],e.LeaderboardService=t,angular.module("app.core").service("leaderboardService",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a,o,n,s){this.$q=e,this.$state=t,this.$stateParams=r,this.$scope=a,this.logger=o,this.season=n,this.leaderboardService=s,this.title="Leaderboards",this.leagueSlug=this.$stateParams.league||this.season.league.slug,this.seasonSlug=this.$stateParams.season||this.season.slug,this.round=this.$stateParams.round||this.season.currentRound,this.activate()}return e.$inject=["$q","$state","$stateParams","$scope","logger","season","leaderboardService"],e.prototype.activate=function(){var e=this,t=new Date,r=t.getUTCMonth()+1,a=t.getFullYear();this.leaderboardService.getSeasonLeaderboard(this.leagueSlug,this.seasonSlug).then(function(t){e.seasonLeaderboard=t}),this.leaderboardService.getSeasonRoundLeaderboard(this.leagueSlug,this.seasonSlug,this.round).then(function(t){e.seasonRoundLeaderboard=t}),this.leaderboardService.getSeasonMonthLeaderboard(this.leagueSlug,this.seasonSlug,a,r).then(function(t){e.seasonMonthLeaderboard=t})},e}();t.$inject=["$q","$state","$stateParams","$scope","logger","season","leaderboardService"],e.LeaderboardsController=t,angular.module("app.leaderboards").controller("LeaderboardsController",t)}(t=e.leaderboards||(e.leaderboards={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"app.leaderboards",config:{url:"/leaderboard",templateUrl:"app/leaderboards/leaderboards.html",controller:"LeaderboardsController",controllerAs:"vm",title:"leaderboards",resolve:{season:["$stateParams","SeasonsResource",function(e,t){var r=e.league,a=e.season;return null!=r&&null!=a?t.getOne(r,a):t["default"]()}]}}}]}angular.module("app.leaderboards").run(t),t.$inject=["routerHelper"]}(t=e.leaderboards||(e.leaderboards={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";angular.module("app.matches").directive("matchPrediction",[function(){return{restrict:"E",templateUrl:"app/matches/match-prediction.html"}}])}(t=e.matches||(e.matches={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=(e/1e3).toFixed(0),r=Math.floor(t/60),a="";return r>59&&(a=Math.floor(r/60),a=a>=10?a:"0"+a,r-=60*a,r=r>=10?r:"0"+r),t=Math.floor(t%60),t=t>=10?t:"0"+t,""!=a?a+":"+r+":"+t:r+":"+t}var r=function(){function e(e,t,r,a,o,n,s,i,c,u,l,d){var p=this;this.$q=e,this.$state=t,this.$stateParams=r,this.$scope=a,this.$window=o,this.fixtures=n,this.season=s,this.logger=i,this.predictionService=c,this.vosePredictorFactory=u,this.cache=l,this.util=d,this.title="Matches",this.predictions={},this.submitButtonEnabled=!1,this.stateKey="public.matches",this.jokerChosen="",this.totalPoints=0,this.totalGoalDiff=0,this.updateTimeout=null,this.makePredictions=function(){if(0!=Object.keys(p.predictions).length){var e={predictions:p.predictions};p.predictionService.submitPredictions(e).then(function(e){for(var t=0,r=e;t<r.length;t++)for(var a=r[t],o=0,n=p.fixtures;o<n.length;o++){var s=n[o];a.fixture==s._id&&(delete s.vosePredictor,delete s.predict)}p.logger.success("Successfully Saved!")},function(e){console.log(e)})}},this.score=function(e,t,r){var a=e._id;null==p.predictions[a]&&(p.predictions[a]={_id:e.prediction._id,goalsHomeTeam:e.choice.goalsHomeTeam,goalsAwayTeam:e.choice.goalsAwayTeam});var o=e.choice["goals"+t+"Team"];p.util.isNumber(o)&&(o=parseInt(o)),null!=r&&(null==o||0===o&&r===-1?o=0:o+=r),p.predictions[a]["goals"+t+"Team"]=o,e.choice["goals"+t+"Team"]=o},this.homeScoreChanged=function(e){var t=e.choice.goalsHomeTeam;t=p.util.isNumber(t)?parseInt(t):null,e.choice.goalsHomeTeam=t,p.score(e,"Home",null)},this.awayScoreChanged=function(e){var t=e.choice.goalsAwayTeam;t=p.util.isNumber(t)?parseInt(t):null,e.choice.goalsAwayTeam=t,p.score(e,"Away",null)},this.currentRound=this.season.currentRound,this.leagueSlug=this.$stateParams.league||this.season.league.slug,this.seasonSlug=this.$stateParams.season||this.season.slug;var h=parseInt(this.$stateParams.round||this.currentRound);this.matchday=h,this.restoreState(),this.refresh(),this.live(),this.onDestroy()}return e.$inject=["$q","$state","$stateParams","$scope","$window","fixtures","season","logger","predictionService","vosePredictorFactory","cache","util"],e.prototype.refresh=function(){for(var e=this,t=!1,r=function(r){var o=r.prediction.choice||{};"SCHEDULED"==r.status||"TIMED"==r.status?(t=!0,o.isComputerGenerated||null==o.isComputerGenerated?(r.vosePredictor=a.vosePredictorFactory.createPredictor(r.odds),r.predict=function(){var t=r.vosePredictor,a=t.predict(),o=a.split("-"),n=o[0],s=o[1];r.choice={goalsHomeTeam:n,goalsAwayTeam:s},null==e.predictions[r._id]&&(e.predictions[r._id]={_id:r.prediction._id}),e.predictions[r._id].goalsHomeTeam=n,e.predictions[r._id].goalsAwayTeam=s},r.choice={goalsHomeTeam:null,goalsAwayTeam:null}):r.choice=o):(r.choice=o,r.prediction.hasJoker&&(a.jokerChosen="chosen")),a.totalPoints+=r.prediction.points||0,a.totalGoalDiff+=r.prediction.goalDiff||0,r.prediction.hasJoker&&r.prediction.goalDiff>=0&&r.prediction.points>0&&(a.totalPoints+=r.prediction.points,a.totalGoalDiff+=r.prediction.goalDiff,r.prediction.points*=2,r.prediction.goalDiff*=2)},a=this,o=0,n=this.fixtures;o<n.length;o++){var s=n[o];r(s)}t||(this.jokerChosen="chosen")},e.prototype.pointsClass=function(e){if("IN_PLAY"===e.status)return"label-warning";var t=e.prediction.points;return t>0?"label-success":"label-default"},e.prototype.diffClass=function(e){if("IN_PLAY"===e.status)return"label-warning";var t=e.prediction.goalDiff;return t>0?"label-success":t<0?"label-danger":"label-default"},e.prototype.nextMatchday=function(){this.matchday<this.season.numberOfRounds&&(this.matchday+=1,this.gotoMatchday())},e.prototype.prevMatchday=function(){this.matchday>1&&(this.matchday-=1,this.gotoMatchday())},e.prototype.currMatchday=function(){this.matchday=this.currentRound,this.gotoMatchday()},e.prototype.luckySpin=function(){for(var e=0,t=this.fixtures;e<t.length;e++){var r=t[e];null!=r.vosePredictor&&r.predict()}},e.prototype.showLuckySpin=function(){var e=this,t=Object.keys(this.fixtures).some(function(t){return null!=e.fixtures[t].vosePredictor});return t},e.prototype.showSubmitButton=function(){for(var e=0,t=this.fixtures;e<t.length;e++){var r=t[e];if("SCHEDULED"==r.status||"TIMED"==r.status){this.submitButtonEnabled=!0;break}}return this.submitButtonEnabled},e.prototype.gotoMatchday=function(){this.$state.go("app.matches",{league:this.leagueSlug,season:this.seasonSlug,round:this.matchday})},e.prototype.restoreState=function(){var e=this.cache.get(this.stateKey);e&&(this.predictions=e.predictions,console.log(this.predictions))},e.prototype.onDestroy=function(){var e=this;this.$scope.$on("$destroy",function(){var t={predictions:e.predictions,league:e.leagueSlug,season:e.seasonSlug,round:e.matchday};e.cache.put(e.stateKey,t)})},e.prototype.jokerChange=function(e){var t=this;this.predictionService.pickJoker(e).then(function(r){angular.forEach(t.fixtures,function(t,r){e!=t&&(t.prediction.hasJoker=!1)})})["catch"](function(){e.prediction.hasJoker=!1,console.log("bad")})},e.prototype.live=function(){var e=this,t=this.leagueSlug,r=this.seasonSlug,a=this.matchday;null==this.updateTimeout?this.scheduleNextUpdate():this.predictionService.fetchLiveFixtures(t,r,a).then(function(o){return e.updateFixtures(o.data),e.hasPendingPredictions()?void e.predictionService.fetchPendingPredictions(t,r,a).then(function(t){return e.updatePredictions(t.data),e.scheduleNextUpdate()}):e.scheduleNextUpdate()})},e.prototype.hasLiveFixtures=function(){return this.$window._.some(this.fixtures,function(e){return"IN_PLAY"===e.status})},e.prototype.hasPendingPredictions=function(){return this.$window._.some(this.fixtures,function(e){return"FINISHED"===e.status&&"PENDING"===e.prediction.status})},e.prototype.updateFixtures=function(e){for(var t=0,r=e;t<r.length;t++)for(var a=r[t],o=0,n=this.fixtures;o<n.length;o++){var s=n[o];if(a._id==s._id){angular.extend(s,a);break}}},e.prototype.updatePredictions=function(e){for(var t=0,r=e;t<r.length;t++)for(var a=r[t],o=0,n=this.fixtures;o<n.length;o++){var s=n[o];if(a._id==s.prediction._id){angular.extend(s.prediction,a);break}}},e.prototype.scheduleNextUpdate=function(){var e=this;clearTimeout(this.updateTimeout);var r=this.calculateNextUpdate(),a=this.$window.moment(),o=r-a;this.updateTimeout=setTimeout(function(){return e.live()},o),console.log("Live Update scheduled for "+r.format()+" - that's in "+t(o))},e.prototype.calculateNextUpdate=function(){for(var e=!1,t=!1,r=this.$window.moment,a=r(),o=r().add(1,"year"),n=0,s=this.fixtures;n<s.length;n++){var i=s[n];if("FINISHED"===i.status&&"PENDING"===i.prediction.status)t=!0;else if("IN_PLAY"===i.status)e=!0;else if("SCHEDULED"===i.status||"TIMED"===i.status){var c=r(i.date);c>a&&c<o&&(o=c)}}var u=r().add(1,"day"),l=o;return e||t?l=r().add(5,"minutes"):o>u&&(l=r().add(12,"hours")),l},e}();r.$inject=["$q","$state","$stateParams","$scope","$window","matches","season","logger","predictionService","vosePredictorFactory","cache","util"],e.MatchesController=r,angular.module("app.matches").controller("MatchesController",r)}(t=e.matches||(e.matches={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"app.matches",config:{url:"/matches?league&season&round",templateUrl:"app/matches/matches.html",controller:"MatchesController",controllerAs:"vm",title:"matches",resolve:{season:["$stateParams","SeasonsResource",function(e,t){var r=e.league,a=e.season;return null!=r&&null!=a?t.getOne(r,a):t["default"]()}],matches:["$stateParams","MatchesResource",function(e,t){var r=e.league,a=e.season,o=e.round;return null!=r&&null!=a&&null!=o?t.forRound(r,a,o):t["default"]()}]}}}]}angular.module("app.matches").run(t),t.$inject=["routerHelper"]}(t=e.matches||(e.matches={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a){var o=this;this.$http=e,this.$q=t,this.exception=r,this.logger=a,this.submitPredictions=function(e){return o.$http.post("/api/predictions",e).then(o.success)["catch"](o.fail)},this.pickJoker=function(e){return o.$http.post("/api/predictions/pick-joker",e).then(o.success)["catch"](o.fail)},this.success=function(e){return e.data},this.fail=function(e){var t=e.data&&e.data.description||"Something bad happened",r="request failed.";return o.exception.catcher(t)(r),o.$q.reject(t)}}return e.$inject=["$http","$q","exception","logger"],e.prototype.fetchLiveFixtures=function(e,t,r){return this.$http.get("/api/matches/live",{params:{league:e,season:t,round:r}})},e.prototype.fetchPendingPredictions=function(e,t,r){return this.$http.get("/api/predictions/mine",{params:{league:e,season:t,round:r}})},e}();t.$inject=["$http","$q","exception","logger"],e.PredictionService=t,angular.module("app.core").service("predictionService",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function r(e){var t=e.reduce(function(e,t){return e+t});return t>1?e=e.map(function(e){return e/t}):t<1&&e.push(1-t),e}var a=function(){function e(){}return e.prototype.createPredictor=function(e){return new o(e)},e}();e.VosePredictorFactory=a;var o=function(){function e(e){void 0===e&&(e={}),this.underdogVose=null,this.drawVose=null,this.favoriteVose=null,null==e&&(e={});var t=e.homeWin,r=e.awayWin,a=e.draw;this.homeWinOdds=t||1,this.awayWinOdds=r||1,this.drawOdds=a||1}return e.prototype.predict=function(){var e=Math.round(1/this.homeWinOdds*100),t=Math.round(1/this.drawOdds*100),r=Math.round(1/this.awayWinOdds*100),a=new n([e,t,r]),o=["HOME","DRAW","AWAY"],s=o[a.next()],i="";return"HOME"===s&&(i=e>r?this.getFavouriteScore(!0):this.getUnderdogScore(!0)),"AWAY"===s&&(i=r>e?this.getFavouriteScore(!1):this.getUnderdogScore(!1)),"DRAW"===s&&(i=this.getDrawScore()),i},e.prototype.getFavouriteScore=function(e){var t,r;return e?(t=["1-0","2-1","2-0","3-1","3-0","3-2"],r=[98,89,81,52,48,28]):(t=["0-1","1-2","0-2","1-3","0-3","2-3"],r=[63,56,34,23,18,14]),null==this.favoriteVose&&(this.favoriteVose=new n(r)),t[this.favoriteVose.next()]},e.prototype.getUnderdogScore=function(e){var t,r;return e?(t=["1-0","2-1","2-0"],r=[98,89,81]):(t=["0-1","1-2","0-2"],r=[63,56,34]),null==this.underdogVose&&(this.underdogVose=new n(r)),t[this.underdogVose.next()]},e.prototype.getDrawScore=function(){var e=["1-1","0-0","2-2"],t=[116,72,52];return null==this.drawVose&&(this.drawVose=new n(t)),e[this.drawVose.next()]},e}(),n=function(){function e(e){var a=this;this.init=function(e){var t,o,n,s=[],i=[];if(!(e instanceof Array)||e.length<1)throw new Error("Vose: weights must be a non-empty array");a.totalDistinctValues=e.length,a.probability=[],a.alias=[],t=1/a.totalDistinctValues,e=r(e.slice(0));for(var c=0;c<a.totalDistinctValues;c++)(e[c]>=t?s:i).push(c);for(;i.length>0&&s.length>0;)o=i.shift(),n=s.shift(),a.probability[o]=e[o]*a.totalDistinctValues,a.alias[o]=n,e[n]=e[n]+e[o]-t,(e[n]>=t?s:i).push(n);for(;0!==s.length;)a.probability[s.shift()]=1;for(;0!==i.length;)a.probability[i.shift()]=1},this.next=function(){var e=t(0,a.totalDistinctValues-1),r=Math.random()<a.probability[e];return r?e:a.alias[e]},this.init(e)}return e}();angular.module("app.matches").service("vosePredictorFactory",a)}(t=e.matches||(e.matches={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e._,r=function(){function e(e){this.items={},this.isEmpty=function(){for(var e in this.items)if(this.items.hasOwnProperty(e))return!1;return!0},this.getCount=function(){return Object.keys(this.items).length},this.getFilteredCount=function(e){return this.itemsToArray(e).length},this.Model=e;var t=e.key,r=function(e){return void 0==e?null:e.id};"string"==typeof t&&(r=function(e){return e[t]}),"function"==typeof t&&(r=t),this.idKey=r}return e.prototype.mapDtoListToContext=function(e){var r=this;t.isArray(e)||(e=[]),this.items=e.reduce(function(e,t){var a=r.idKey(t),o=r.items[a];if(o)angular.extend(o,t);else{var n=r.Model;o=new n(t)}return e[a]=o,e},{})},e.prototype.mapDtoToContext=function(e){var t=this.idKey(e);if(!t)throw new Error("id not defined");var r=this.items[t];if(r)angular.extend(r,e);else{var a=this.Model;r=new a(e)}return this.items[t]=r,this.items[t]},e.prototype.add=function(e){var t=this.idKey(e);return this.items[t]=e,this.items[t]},e.prototype.removeById=function(e){delete this.items[e]},e.prototype.getById=function(e){return e&&this.items[e]?this.items[e]:this.Model.nullo},e.prototype.getAll=function(e){void 0===e&&(e={});var t=e.filter,r=e.sort,a=e.page,o=e.size;return this.itemsToArray(t,r,a,o)},e.prototype.clear=function(){for(var e in this.items)this.items.hasOwnProperty(e)&&delete this.items[e]},e.prototype.itemsToArray=function(e,t,r,a){var o=this.mapMemoToArray();if(e&&(o=o.filter(function(t){var r=e.predicate(t);return r})),t&&o.sort(t),r&&a){var n=(r-1)*a;o=o.slice(n,n+a)}return o},e.prototype.mapMemoToArray=function(){var e=[];for(var t in this.items)this.items.hasOwnProperty(t)&&e.push(this.items[t]);return e},e}();return r}t.$inject=["$window"],angular.module("app.core").factory("EntitySet",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a){var o=this;this.$http=e,this.$q=t,this.exception=r,this.logger=a,this.getFixturesWithPredictions=function(){return o.$http.get("/api/matches/predictions").then(o.success)["catch"](o.fail)},this.success=function(e){return e.data},this.fail=function(e){var t=e.data.description,r="query for fixture-with-predictions failed.";return o.exception.catcher(t)(r),o.$q.reject(t)}}return e.$inject=["$http","$q","exception","logger"],e}();t.$inject=["$http","$q","exception","logger"],e.FixturePredictionService=t,angular.module("app.core").service("fixturePredictionService",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(){var e=function(){function e(e){angular.extend(this,e)}return e}();return e.key="_id",e}angular.module("app.core").factory("Fixture",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(){var e=function(){function e(e){this.homeScore=0,this.awayScore=0,this.assigned=!1,this.prediction={},angular.extend(this,e),this.initScore()}return e.prototype.assign=function(){this.draw()?(this.homeTeam.addPoints(1),this.awayTeam.addPoints(1)):this.homeWin()?(this.homeTeam.addPoints(3),this.awayTeam.addPoints(0)):(this.homeTeam.addPoints(0),this.awayTeam.addPoints(3))},e.prototype.getHomeTeam=function(){return this.homeTeam},e.prototype.getAwayTeam=function(){return this.awayTeam},e.prototype.getHomeScore=function(){return this.homeScore},e.prototype.getAwayScore=function(){return this.awayScore},e.prototype.initScore=function(){this.setScore(this.result.goalsHomeTeam,this.result.goalsAwayTeam)},e.prototype.initScore1=function(){var e=this.result.goalsHomeTeam||0,t=this.result.goalsAwayTeam||0,r=this.prediction&&this.prediction.choice;r&&~r.goalsHomeTeam&&(e=r.goalsHomeTeam,t=r.goalsAwayTeam),this.setScore(e,t)},e.prototype.setScore=function(e,t){this.homeScore=e,this.awayScore=t},e.prototype.draw=function(){return this.homeScore==this.awayScore},e.prototype.homeWin=function(){return this.homeScore>this.awayScore},e}();return e}angular.module("app.core").factory("Match",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(){var e=function(){function e(e){angular.extend(this,e)}return e.prototype.setMatches=function(e){this.matches=e},e.prototype.getMatches=function(){return this.matches},e.prototype.assign=function(){for(var e=0;e<this.matches.length;e++){var t=this.matches[e];t.assign()}},e}();return e}angular.module("app.core").factory("Round",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e,t,r,a,o){var n=function(){function n(){}return n.prototype.createLeagueSeason=function(e,t){return void 0===t&&(t=!1),this.createSeason(e,t)},n.prototype.createSeason=function(e,t){var n=this.createTeamsDictionary(e),s=this.createRoundsDictionary(e),i=this.getRoundsPlayed(e),c=[];for(var u in s){for(var l=[],d=0,p=s[u];d<p.length;d++){var h=p[d],f=n[h.homeTeam.name],m=n[h.awayTeam.name];h.homeTeam=f,h.awayTeam=m;var g=new a(h);t&&g.initScore1(),l.push(g)}var v=new o;v.setMatches(l),c.push(v)}var y=new r;return y.setTeams(this.getTeamsAsArray(n)),y.setRounds(c),y.setRoundsPlayed(i),y},n.prototype.createTeamsDictionary=function(e){for(var r={},a=0,o=e;a<o.length;a++){var n=o[a],s=new t(n.homeTeam),i=new t(n.awayTeam);r[n.homeTeam.name]=s,r[n.awayTeam.name]=i}return r},n.prototype.createRoundsDictionary=function(e){var t=e.reduce(function(e,t){return e[t.round]=e[t.round]||[],e[t.round].push(t),e},Object.create(null));return t},n.prototype.getTeamsAsArray=function(e){var t=[];for(var r in e)t.push(e[r]);return t},n.prototype.getRoundsPlayed=function(t){var r=e._.chain(t).filter(function(e){return null!=e.result.goalsHomeTeam}).map(function(e){return e.round}).max().value();return r},n}();return new n}t.$inject=["$window","Team","Season","Match","Round"],angular.module("app.core").factory("leagueSeasonFactory",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(){var e=function(){function e(e){this.currentRoundNumber=1,this.roundsPlayed=0,angular.extend(this,e)}return e.prototype.getTeams=function(){return this.teams},e.prototype.setTeams=function(e){this.teams=e},e.prototype.sortStandings=function(){this.teams.sort(function(e,t){return t.getPoints()-e.getPoints()})},e.prototype.setRoundsPlayed=function(e){this.roundsPlayed=e,this.setCurrentRound(e)},e.prototype.setRounds=function(e){this.rounds=e},e.prototype.getRounds=function(){return this.rounds},e.prototype.nextRound=function(){if(this.hasNextRound()){var e=this.currentRoundNumber+=1;this.setCurrentRound(e)}},e.prototype.prevRound=function(){if(this.hasPrevRound()){var e=this.currentRoundNumber-=1;this.setCurrentRound(e)}},e.prototype.setCurrentRound=function(e){if(e<=this.roundsPlayed){for(var t=0;t<this.teams.length;t++){var r=this.teams[t];r.resetPoints()}for(var t=0;t<e;t++){var a=this.rounds[t];a.assign()}this.currentRoundNumber=e,this.sortStandings()}},e.prototype.getCurrentRound=function(){return this.rounds[this.currentRoundNumber-1]},e.prototype.hasPrevRound=function(){return this.currentRoundNumber>1},e.prototype.hasNextRound=function(){return this.currentRoundNumber<this.rounds.length},e.prototype.isLastRound=function(){return this.currentRoundNumber==this.rounds.length},e.prototype.isLastRoundPlayed=function(){return this.currentRoundNumber==this.roundsPlayed},e.prototype.isFirstRound=function(){return 1==this.currentRoundNumber},e.prototype.assign=function(){this.setCurrentRound(this.currentRoundNumber)},e}();return e}angular.module("app.core").factory("Season",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(){var e=function(){function e(e){this.points=0,angular.extend(this,e)}return e.prototype.getPoints=function(){return this.points},e.prototype.resetPoints=function(){this.points=0},e.prototype.addPoints=function(e){this.points+=e},e.prototype.getName=function(){return this.name},e}();return e}angular.module("app.core").factory("Team",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.prototype.modelTest=function(e){return this.roundId===e.roundId},e.prototype.predicate=function(e){var t=this.modelTest(e);return t},e}();e.Filter=t,angular.module("app.core").service("predictionFilter",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){return/^[-]?\d+$/.test(e)}var r=function(){function e(e,t,r,a,o,n,s,i,c){this.$q=e,this.$window=t,this.storage=r,this.logger=a,this.leagueSeasonFactory=o,this.fixturePredictionService=n,this.EntitySet=s,this.Fixture=i,this.sort=c,this.title="Predictions",this.paging={currentPage:1,maxPagesToShow:5,pageSize:10},this.activate()}return e.$inject=["$q","$window","storage","logger","leagueSeasonFactory","fixturePredictionService","EntitySet","Fixture","sort"],e.prototype.activate=function(){var e=this;this.init(),this.fixturePredictionService.getFixturesWithPredictions().then(function(t){e.compressed=t,e.storage.setItem("compressed-fixtures",t.compressed);var r=e.$window.lzwCompress.unpack(t.compressed);e.fixtureSet=new e.EntitySet(e.Fixture),e.fixtureSet.mapDtoListToContext(r),e.pageChanged(),e.fixtureCount=e.fixtureSet.getCount(),e.fixtureFilteredCount=e.fixtureSet.getFilteredCount()})},e.prototype.init=function(){var e=this;Object.defineProperty(this.paging,"showing",{get:function(){var t=e.paging,r=e.fixtureFilteredCount;if(0===r)return"";var a=(t.currentPage-1)*t.pageSize+1,o=a+t.pageSize-1;return o>r&&(o=r),"showing "+a+" - "+o+" of "+(r||0)}}),Object.defineProperty(this.paging,"pageCount",{get:function(){var r=e.fixtureFilteredCount/e.paging.pageSize,a=Math.floor(r);return t(r)||(a+=1),a}})},e.prototype.pageChanged=function(){this.fixtures=this.fixtureSet.getAll({sort:this.sort.sort_by("date"),page:this.paging.currentPage,size:this.paging.pageSize})},e}();r.$inject=["$q","$window","localstorage","logger","leagueSeasonFactory","fixturePredictionService","EntitySet","Fixture","sort"],e.PredictionsController=r,angular.module("app.predictions").controller("PredictionsController",r)}(t=e.predictions||(e.predictions={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"app.predictions",config:{url:"/predictions",templateUrl:"app/predictions/predictions.html",controller:"PredictionsController",controllerAs:"vm",title:"predictions"}}]}angular.module("app.predictions").run(t),t.$inject=["routerHelper"]}(t=e.predictions||(e.predictions={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("leagues"),r=e("fixtures");return r.forRound=function(e,r,a){return t.getList("/:leagueId/seasons/:seasonId/rounds/:roundId/fixtures",{leagueId:e,seasonId:r,roundId:a})},r.forTeam=function(e,r,a){return t.getList("/:leagueId/seasons/:seasonId/teams/:teamId/fixtures",{leagueId:e,seasonId:r,teamId:a})},r.getOne=function(e,r,a,o){return t.getOne("/:leagueId/seasons/:seasonId/rounds/:roundId/fixtures/:fixtureId",{leagueId:e,seasonId:r,roundId:a,fixtureId:o})},r}t.$inject=["resource"],angular.module("app.core").factory("FixturesResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("leagues");return t}t.$inject=["resource"],angular.module("app.core").factory("LeaderBoardsResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("leagues");return t}t.$inject=["resource"],angular.module("app.core").factory("LeaguesResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("matches");return t["default"]=function(){return t.all()},t.forRound=function(e,r,a){return t.getList("?league=:league&season=:season&round=:round",{league:e,season:r,round:a})},t}t.$inject=["resource"],angular.module("app.core").factory("MatchesResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("predictions");return t}t.$inject=["resource"],angular.module("app.core").factory("PredictionsResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e,t,a){return function(o){var n,s=e.baseUrl+"/api/"+o,i={};return n=function(){function e(e){angular.extend(this,e)}return e.newInstance=function(t){return new e(t)},e.all=function(t,r){return e.query({},t,r)},e.getList=function(a,o,n,c){var u=r(s+a,o),l=t.get(u,i);return e.thenFactoryMethod(l,n,c,!0)},e.getOne=function(a,o,n,c){var u=r(s+a,o),l=t.get(u,i);return e.thenFactoryMethod(l,n,c)},e.query=function(r,a,o){var n=t.get(s,{params:angular.extend({},i,r)});return e.thenFactoryMethod(n,a,o,!0)},e.getById=function(r,a,o){var n=t.get(s+"/"+r,{params:i});return e.thenFactoryMethod(n,a,o)},e.prototype.id=function(){return this._id?this._id:""},e.prototype.save=function(r,a){var o=t.post(s,this,{params:i});return e.thenFactoryMethod(o,r,a)},e.prototype.update=function(r,a){var o=t.put(s+"/"+this.id(),angular.extend({},this,{_id:void 0}),{params:i});return e.thenFactoryMethod(o,r,a)},e.prototype.remove=function(r,a){var o=t["delete"](s+"/"+this.id(),{params:i});return e.thenFactoryMethod(o,r,a)},e.prototype.saveOrUpdate=function(e,t,r,a){return this.id()?this.update(t,a):this.save(e,r)},e.thenFactoryMethod=function(t,r,n,s){var i=r||angular.noop,c=n||angular.noop;return t.then(function(t){var r;if(s){r=[];for(var n=0;n<t.data.length;n++)r.push(new e(t.data[n]))}else{if(" null "===t.data)return a.reject({code:"resource.notfound",resource:o});r=new e(t.data)}return i(r,t.status,t.headers,t.config),r},function(e){c(void 0,e.status,e.headers,e.config)})},e}()}}function r(e,t){var r=e,o=t,n={};for(var s in o){var i=o[s],c=r.replace(":"+s,i);c===r&&(n[s]=i),r=c}var u=a(n);return r&&u&&(r.indexOf("?")!==-1?r+=u:r=r+"?"+u),r}function a(e){var t="";for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];t&&(t+="&"),t+=r+"="+a}return t}t.$inject=["config","$http","$q"],angular.module("app.core").factory("resource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("leagues"),r=e("rounds");return r.forSeason=function(e,r){return t.getList("/:leagueId/seasons/:seasonId/rounds",{leagueId:e,seasonId:r})},r}t.$inject=["resource"],angular.module("app.core").factory("RoundsResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("leagues"),r=e("seasons"),a=e("seasons");
return a["default"]=function(){return r.getOne("/default")},a.forLeague=function(e){return t.getList("/:leagueId/seasons",{leagueId:e})},a.getOne=function(e,r){return t.getOne("/:leagueId/seasons/:seasonId",{leagueId:e,seasonId:r})},a}t.$inject=["resource"],angular.module("app.core").factory("SeasonsResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("leagues"),r=e("teams");return r.forSeason=function(e,r){return t.getList("/:leagueId/seasons/:seasonId/teams",{leagueId:e,seasonId:r})},r}t.$inject=["resource"],angular.module("app.core").factory("TeamsResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=e("users");return t}t.$inject=["resource"],angular.module("app.core").factory("UsersResource",t)}(t=e.core||(e.core={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.$q=e,this.logger=t,this.title="Rules",this.goalsRange=[0,1,2,3,4,5,6,7,8,9],this.homeScoreResult=0,this.awayScoreResult=0,this.homeScorePrediction=0,this.awayScorePrediction=0,this.hasJoker=!1,this.points={rules:{RULE_1:{id:"1",show:!1,value:0,name:"Correct Match Outcome"},RULE_2:{id:"2",show:!1,value:0,name:"Correct Goal Difference"},RULE_3:{id:"3",show:!1,value:0,name:"Correct Team Score"},RULE_4:{id:"4",show:!1,value:0,name:"Exact Match Score"},RULE_5:{id:"5",show:!1,value:0,name:"Team Score of 2 or more"},RULE_6:{id:"6",show:!1,value:0,name:"Within 1 goal of Match Score"}},value:0},this.goalDiff={rules:{RULE_1:{id:"1",show:!1,value:0,name:"Correct Team Score (Gain)"},RULE_2:{id:"2",show:!1,value:0,name:"Incorrect Team Score (Loss)"},RULE_3_1:{id:"3.1",show:!1,value:0,name:"Team Score Within 1 (Insurance)"},RULE_3_2:{id:"3.2",show:!1,value:0,name:"Correct Goal Difference (Extra)"},RULE_4:{id:"4",show:!1,value:0,name:"Least of the Goal-Differences (Gain)"}},value:0},this.totalPoints=0,this.totalGoalDiff=0,this.activate()}return e.$inject=["$q","logger"],e.prototype.activate=function(){this.defaultPoints=angular.copy(this.points),this.defaultGoalDiff=angular.copy(this.goalDiff),this.goalsChanged()},e.prototype.jokerChanged=function(){this.totalPoints=0,this.totalGoalDiff=0,this.totalPoints+=this.points.value,this.totalGoalDiff+=this.goalDiff.value,this.hasJoker&&this.goalDiff.value>=0&&(this.totalPoints+=this.points.value,this.totalGoalDiff+=this.goalDiff.value)},e.prototype.goalsChanged=function(){this.totalPoints=0,this.totalGoalDiff=0,this.points=angular.copy(this.defaultPoints),this.goalDiff=angular.copy(this.defaultGoalDiff);var e=this.calcOutcome(this.homeScorePrediction,this.awayScorePrediction),t=this.calcOutcome(this.homeScoreResult,this.awayScoreResult),r=this.homeScorePrediction-this.awayScorePrediction,a=this.homeScoreResult-this.awayScoreResult;this.processPoints(e,t,r,a),this.processGoalDiff(e,t,r,a),this.jokerChanged()},e.prototype.processPoints=function(e,t,r,a){var o=this.points.rules;e===t&&(o.RULE_1.show=!0,o.RULE_1.value=4),r===a&&(o.RULE_2.show=!0,o.RULE_2.value=1),this.homeScorePrediction===this.homeScoreResult&&(o.RULE_3.show=!0,o.RULE_3.value+=1),this.awayScorePrediction===this.awayScoreResult&&(o.RULE_3.show=!0,o.RULE_3.value+=1),this.homeScorePrediction===this.homeScoreResult&&this.awayScorePrediction===this.awayScoreResult&&(o.RULE_4.show=!0,o.RULE_4.value=1),this.homeScorePrediction>1&&this.homeScoreResult>1&&(o.RULE_5.show=!0,o.RULE_5.value+=1),this.awayScorePrediction>1&&this.awayScoreResult>1&&(o.RULE_5.show=!0,o.RULE_5.value+=1),1!==Math.abs(r-a)||this.homeScorePrediction!==this.homeScoreResult&&this.awayScorePrediction!==this.awayScoreResult||(o.RULE_6.show=!0,o.RULE_6.value+=1);for(var n in o){var s=o[n];s.show&&(this.points.value+=s.value)}},e.prototype.processGoalDiff=function(e,t,r,a){r=Math.abs(r),a=Math.abs(a);var o=null,n=null,s=Math.abs(Math.min(r,a))||1,i=this.goalDiff.rules;i.RULE_4.show=!0,i.RULE_4.value=s,e===t&&(o=Math.abs(this.homeScorePrediction-this.homeScoreResult),n=Math.abs(this.awayScorePrediction-this.awayScoreResult),o>0&&n>0&&r===a&&(i.RULE_3_2.show=!0,i.RULE_3_2.value=1),1===o?(i.RULE_2.show=!1,i.RULE_2.value-=1,i.RULE_3_1.show=!0,i.RULE_3_1.value+=1):o=null,1===n?(i.RULE_2.show=!1,i.RULE_2.value-=1,i.RULE_3_1.show=!0,i.RULE_3_1.value+=1):n=null),null===o&&(o=Math.abs(this.homeScorePrediction-this.homeScoreResult),0===o?(i.RULE_1.show=!0,i.RULE_1.value+=this.homeScoreResult||1):(i.RULE_2.show=!0,i.RULE_2.value-=o)),null===n&&(n=Math.abs(this.awayScorePrediction-this.awayScoreResult),0===n?(i.RULE_1.show=!0,i.RULE_1.value+=this.awayScoreResult||1):(i.RULE_2.show=!0,i.RULE_2.value-=n));for(var c in i){var u=i[c];this.goalDiff.value+=u.value}i.RULE_2.value+=i.RULE_3_1.value,i.RULE_3_1.value=null},e.prototype.calcOutcome=function(e,t){return e>t?"w":e<t?"l":e===t?"d":void 0},e}();t.$inject=["$q","logger"],e.RulesController=t,angular.module("app.rules").controller("RulesController",t)}(t=e.rules||(e.rules={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"app.rules",config:{url:"/rules",templateUrl:"app/rules/rules.html",controller:"RulesController",controllerAs:"vm",title:"rules"}}]}angular.module("app.rules").run(t),t.$inject=["routerHelper"]}(t=e.rules||(e.rules={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a,o,n){this.$q=e,this.$window=t,this.storage=r,this._=a,this.logger=o,this.fixturePredictionService=n,this.title="Stats",this.COLORS=["#1f77b4","#d62728"],this.BAR_CHART_OPTIONS={chart:{type:"multiBarHorizontalChart",height:250,x:function(e){return e.label},y:function(e){return e.value},showValues:!0,showControls:!1,duration:500,xAxis:{showMaxMin:!1},yAxis:{axisLabel:"Values"},color:this.COLORS}},this.allMatchOutcomes={loading:!0},this.activate()}return e.$inject=["$q","$window","storage","_","logger","fixturePredictionService"],e.prototype.activate=function(){var e=this;this.fixturePredictionService.getFixturesWithPredictions().then(function(t){e.compressed=t,e.fixtures=e.$window.lzwCompress.unpack(t.compressed),e.allMatchOutcomes.options=e.BAR_CHART_OPTIONS,e.allMatchOutcomes.loading=!1,e.allMatchOutcomes.err=null,e.allMatchOutcomes.data=[{key:"Correct",values:[{label:"Arsenal",value:40.5},{label:"Liverpool",value:55.5}]},{key:"Incorrect",values:[{label:"Arsenal",value:59.5},{label:"Liverpool",value:44.5}]}]})},e}();t.$inject=["$q","$window","_","localstorage","logger","fixturePredictionService"],e.StatsController=t,angular.module("app.stats").controller("StatsController",t)}(t=e.stats||(e.stats={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"app.stats",config:{url:"/stats",templateUrl:"app/stats/stats.html",controller:"StatsController",controllerAs:"vm",title:"stats"}}]}angular.module("app.stats").run(t),t.$inject=["routerHelper"]}(t=e.stats||(e.stats={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r,a,o){this.$q=e,this.$window=t,this.logger=r,this.leagueSeasonFactory=a,this.fixturePredictionService=o,this.title="WhatIf",this.activate()}return e.$inject=["$q","$window","logger","leagueSeasonFactory","fixturePredictionService"],e.prototype.activate=function(){var e=this;this.fixturePredictionService.getFixturesWithPredictions().then(function(t){e.fixtures=e.$window.lzwCompress.unpack(t.compressed),e.season=e.leagueSeasonFactory.createLeagueSeason(e.fixtures),e.season1=angular.copy(e.season),e.predSeason=e.leagueSeasonFactory.createLeagueSeason(e.fixtures,!0)})},e.prototype.goalsChanged=function(e){e.setScore(e.getHomeScore(),e.getAwayScore()),this.season.assign(),this.season1=angular.copy(this.season)},e.prototype.isFirstRound=function(){return this.season&&this.season.isFirstRound()},e.prototype.isLastRound=function(){return this.season&&this.season.isLastRound()},e.prototype.prevRound=function(){this.season.prevRound(),this.season1.prevRound()},e.prototype.nextRound=function(){this.season.nextRound(),this.season1.nextRound()},e.prototype.addHomeScore=function(e){e.setScore(e.getHomeScore()+1,e.getAwayScore()),this.season.assign(),this.season1=angular.copy(this.season)},e.prototype.addAwayScore=function(e){e.setScore(e.getHomeScore(),e.getAwayScore()+1),this.season.assign(),this.season1=angular.copy(this.season)},e}();t.$inject=["$q","$window","logger","leagueSeasonFactory","fixturePredictionService"],e.WhatIfController=t,angular.module("app.whatif").controller("WhatIfController",t)}(t=e.whatif||(e.whatif={}))}(app||(app={}));var app;!function(e){var t;!function(e){"use strict";function t(e){var t=r();e.configureStates(t)}function r(){return[{state:"app.whatif",config:{url:"/what-if",templateUrl:"app/whatif/whatif.html",controller:"WhatIfController",controllerAs:"vm",title:"whatif"}}]}angular.module("app.whatif").run(t),t.$inject=["routerHelper"]}(t=e.whatif||(e.whatif={}))}(app||(app={})),angular.module("app.core").run(["$templateCache",function(e){e.put("app/auth/login.html",'<div class=container><div class=row><div class="center-form panel"><div class=panel-body><h2 class=text-center>Log in</h2><form method=post ng-submit=vm.login() name=loginForm><div class="form-group has-feedback"><input class="form-control input-lg" type=text name=email ng-model=vm.user.email placeholder=Email required autofocus> <span class="fa fa-at form-control-feedback"></span></div><div class="form-group has-feedback"><input class="form-control input-lg" type=password name=password ng-model=vm.user.password placeholder=Password required> <span class="fa fa-key form-control-feedback"></span></div><button type=submit ng-disabled=loginForm.$invalid class="btn btn-lg btn-block btn-success">Log in</button><br><p class="text-center text-muted"><small>Don\'t have an account yet? <a href=/signup>Sign up</a></small></p><div class=signup-or-separator><h6 class=text>or</h6><hr></div></form><button class="btn btn-block btn-facebook" ng-click="vm.authenticate(\'facebook\')"><i class="fa fa-facebook"></i> Sign in with Facebook</button> <button class="btn btn-block btn-google-plus" ng-click="vm.authenticate(\'google\')"><span class="fa fa-google-plus"></span>Sign in with Google</button></div></div></div></div>'),e.put("app/auth/signup.html",'<div class=container><div class=row><div class="center-form panel"><div class=panel-body><h2 class=text-center>Sign up</h2><form method=post ng-submit=vm.signup() name=signupForm><div class="form-group has-feedback" ng-class="{ \'has-error\' : signupForm.userName.$invalid && signupForm.userName.$dirty }"><input class="form-control input-lg" type=text name=userName ng-model=vm.user.userName placeholder="User Name" required autofocus> <span class="fa fa-user form-control-feedback"></span><div class="help-block text-danger" ng-if=signupForm.userName.$dirty ng-messages=signupForm.userName.$error><div ng-message=required>You must enter your user-name.</div></div></div><div class="form-group has-feedback" ng-class="{ \'has-error\' : signupForm.email.$invalid && signupForm.email.$dirty }"><input class="form-control input-lg" type=email id=email name=email ng-model=vm.user.email placeholder=Email required> <span class="fa fa-at form-control-feedback"></span><div class="help-block text-danger" ng-if=signupForm.email.$dirty ng-messages=signupForm.email.$error><div ng-message=required>Your email address is required.</div><div ng-message=pattern>Your email address is invalid.</div></div></div><div class="form-group has-feedback" ng-class="{ \'has-error\' : signupForm.password.$invalid && signupForm.password.$dirty }"><input lp-password-strength class="form-control input-lg" type=password name=password ng-model=vm.user.password placeholder=Password required> <span class="fa fa-key form-control-feedback"></span><div class="help-block text-danger" ng-if=signupForm.password.$dirty ng-messages=signupForm.password.$error><div ng-message=required>Password is required.</div></div></div><div class="form-group has-feedback" ng-class="{ \'has-error\' : signupForm.confirmPassword.$invalid && signupForm.confirmPassword.$dirty }"><input lp-password-match=vm.user.password class="form-control input-lg" type=password name=confirmPassword ng-model=vm.confirmPassword placeholder="Confirm Password"> <span class="fa fa-key form-control-feedback"></span><div class="help-block text-danger" ng-if=signupForm.confirmPassword.$dirty ng-messages=signupForm.confirmPassword.$error><div ng-message=compareTo>Password must match.</div></div></div><p class="text-center text-muted"><small>By clicking on Sign up, you agree to <a href="/">terms & conditions</a> and <a href="/">privacy policy</a></small></p><button type=submit ng-disabled=signupForm.$invalid class="btn btn-lg btn-block btn-primary">Sign up</button><br><p class="text-center text-muted">Already have an account? <a href=/login>Log in now</a></p></form></div></div></div></div>'),e.put("app/core/404.html",'<section id=dashboard-view class=mainbar><section class=matter><div class=container><div class=row><div class=col-md-12><ul class=today-datas><li class=bred><div class=pull-left><i class="fa fa-warning"></i></div><div class="datas-text pull-right"><a><span class=bold>404</span></a>Page Not Found</div><div class=clearfix></div></li></ul></div></div><div class=row><div class="widget wblue"><div ht-widget-header title="Page Not Found" allow-collapse=true></div><div class="widget-content text-center text-info"><div class=container>No soup for you!</div></div><div class=widget-foot><div class=clearfix></div></div></div></div></div></section></section>'),e.put("app/layout/lp-top-nav.html",'<div class="navbar navbar-default navbar-static-top"><div class=navbar-header><a class=navbar-brand href="/"><i class=ion-ios7-pulse-strong></i> LP</a></div><ul class="nav navbar-nav"><li ng-class="{active:isNavbarActive(\'matches\')}"><a href="/">Home</a></li><li ng-if=vm.isAdmin() class=dropdown><a href=# data-toggle=dropdown class=dropdown-toggle>Admin <b class=caret></b></a><ul class=dropdown-menu role=menu><li><a href=/admin/leagues>Manage Leagues</a></li><li><a href=/admin/fixtures>Manage Fixtues</a></li><li class=divider></li><li><a href=/admin/teams>Mangage Teams</a></li></ul></li><li ng-class="{active:isNavbarActive(\'leaderboard\')}"><a href=/leaderboard>Leaderboard</a></li><li ng-class="{active:isNavbarActive(\'predictions\')}"><a href=/predictions>Predictions</a></li><li ng-class="{active:isNavbarActive(\'what-if\')}"><a href=/what-if>What If?</a></li><li ng-class="{active:isNavbarActive(\'stats\')}"><a href=/stats>Stats</a></li><li ng-class="{active:isNavbarActive(\'rules\')}"><a href=/rules>Rules</a></li></ul><ul ng-if=!vm.isAuthenticated() class="nav navbar-nav pull-right"><li><a href=/login>Login</a></li><li><a href=/signup>Sign up</a></li></ul><ul ng-if=vm.isAuthenticated() class="nav navbar-nav navbar-right"><li class=dropdown><a href=# data-toggle=dropdown class=dropdown-toggle>{{vm.userName()}} <b class=caret></b></a><ul class=dropdown-menu role=menu><li><a href=/me>Profile</a></li><li class=divider></li><li><a href data-ng-click=vm.logout()>Logout</a></li></ul></li><li><span style=margin-left:32px></span></li></ul></div>'),e.put("app/layout/shell.in.html",'<div><header class=clearfix><lp-top-nav navline=vm.navline></lp-top-nav></header><section id=content class=content><div class=container><div><ol class=breadcrumb ng-if=vm.isAdmin()><li ng-repeat="crumb in vm.breadcrumbs.getAll()" ng-class="{ active: $last }"><a href={{crumb.path}} ng-if=!$last>{{crumb.name}}</a> <span ng-show=$last>{{crumb.name }}</span>&nbsp;</li></ol></div><div ui-view></div></div></section></div>'),e.put("app/layout/shell.out.html","<div><section id=content class=content><div ui-view></div></section></div>"),e.put("app/leaderboards/leaderboards.html",'<div class=col-sm-12><div class=row><div class="col-xs-12 col-md-6"><h4>Month Leaderboard</h4><div><table class=table><thead><tr><th>#</th><th>Name</th><th>Points</th><th>Goal Difference</th></tr></thead><tbody><tr ng-repeat="score in vm.seasonRoundLeaderboard"><td><i ng-if="score.change > 0" class="fa fa-caret-up" style=font-size:12px;color:green></i> <i ng-if="score.change < 0" class="fa fa-caret-down" style=font-size:12px;color:red></i> <i ng-if="score.change === 0"></i> {{score.rank}}</td><td>{{score.user.displayName}}</td><td>{{score.points || 0}}</td><td>{{score.goalDiff || 0}}</td></tr></tbody></table></div></div><div class="col-xs-12 col-md-6"><h4>Round Leaderboard</h4><div><table class=table><thead><tr><th>#</th><th>Name</th><th>Points</th><th>Goal Difference</th></tr></thead><tbody><tr ng-repeat="score in vm.seasonMonthLeaderboard"><td><i ng-if="score.change > 0" class="fa fa-caret-up" style=font-size:12px;color:green></i> <i ng-if="score.change < 0" class="fa fa-caret-down" style=font-size:12px;color:red></i> <i ng-if="score.change === 0"></i> {{score.rank}}</td><td>{{score.user.displayName}}</td><td>{{score.points || 0}}</td><td>{{score.goalDiff || 0}}</td></tr></tbody></table></div></div></div><div class=row><div class=col-xs-12><h4>Season Leaderboard</h4><div><table class=table><thead><tr><th>#</th><th>Name</th><th>Points</th><th>Goal Difference</th></tr></thead><tbody><tr ng-repeat="score in vm.seasonLeaderboard"><td><i ng-if="score.change > 0" class="fa fa-caret-up" style=font-size:12px;color:green></i> <i ng-if="score.change < 0" class="fa fa-caret-down" style=font-size:12px;color:red></i> <i ng-if="score.change === 0"></i> {{score.rank}}</td><td>{{score.user.displayName}}</td><td>{{score.points || 0}}</td><td>{{score.goalDiff || 0}}</td></tr></tbody></table></div></div></div></div>'),e.put("app/matches/match-prediction.html",'<div ng-if="fixture.result.goalsHomeTeam == undefined || fixture.result.goalsAwayTeam == undefined"><div class=col-xs-6><div class=score-selector><a class=btn-score ng-click="vm.score(fixture,\'Home\',1)"><i class="fa fa-chevron-up"></i></a><div class=score-selector-inner><input tabindex={{$index+1}} ng-change=vm.homeScoreChanged(fixture) type=tel class=input-score pattern=\\d length=1 min=0 value=0 ng-model=fixture.choice.goalsHomeTeam></div><a class=btn-score ng-click="vm.score(fixture,\'Home\',-1)"><i class="fa fa-chevron-down"></i></a></div></div><div class=col-xs-6><div class=score-selector><a class=btn-score ng-click="vm.score(fixture,\'Away\',1)"><i class="fa fa-chevron-up"></i></a><div class=score-selector-inner><input tabindex={{$index+1}} ng-change=vm.awayScoreChanged(fixture) type=text class=input-score pattern=\\d length=1 min=0 value=0 ng-model=fixture.choice.goalsAwayTeam></div><a class=btn-score ng-click="vm.score(fixture,\'Away\',-1)"><i class="fa fa-chevron-down"></i></a></div></div><div class=row><div class=col-xs-12><span class="joker-container {{vm.jokerChosen}}"><label><input type=radio name=joker ng-model=fixture.prediction.hasJoker ng-if="fixture.prediction.hasJoker == true" ng-change=vm.jokerChange(fixture) ng-value=true checked> <input type=radio name=joker ng-model=fixture.prediction.hasJoker ng-if="!fixture.prediction.hasJoker == true" ng-change=vm.jokerChange(fixture) ng-value=true> <img ng-if="!fixture.prediction.hasJoker == true" src=images/Joker13.svg alt=JOKER> <img ng-if="fixture.prediction.hasJoker == true" src=images/Joker14.svg alt=JOKER></label></span></div></div></div><div ng-if="(fixture.result.goalsHomeTeam != undefined && fixture.result.goalsAwayTeam != undefined)" class="score-result text-center"><div class=row><div class=col-xs-4>{{(fixture.prediction.choice.goalsHomeTeam !== undefined) ? fixture.prediction.choice.goalsHomeTeam : \'-\'}}</div><div class="col-xs-4 prediction-heading">Predicted</div><div class=col-xs-4>{{(fixture.prediction.choice.goalsAwayTeam !== undefined) ? fixture.prediction.choice.goalsAwayTeam : \'-\'}}</div></div><div class=row><div class=col-xs-4>{{fixture.result.goalsHomeTeam}}</div><div class="col-xs-4 prediction-heading">Result</div><div class=col-xs-4>{{fixture.result.goalsAwayTeam}}</div></div><div class=row><div class=col-xs-12><span class="joker-container {{vm.jokerChosen}}"><label><input type=radio name=joker ng-model=fixture.prediction.hasJoker ng-if="fixture.prediction.hasJoker == true" ng-change=vm.jokerChange(fixture) ng-value=true checked> <input type=radio name=joker ng-model=fixture.prediction.hasJoker ng-if="!fixture.prediction.hasJoker == true" ng-change=vm.jokerChange(fixture) ng-value=true> <img ng-if="!fixture.prediction.hasJoker == true" src=images/Joker13.svg alt=JOKER> <img ng-if="fixture.prediction.hasJoker == true" src=images/Joker14.svg alt=JOKER></label></span> <span class=label ng-class=vm.pointsClass(fixture)>Points {{fixture.prediction.points || 0}}</span> <span class=label ng-class=vm.diffClass(fixture)>Gd <span ng-if="fixture.prediction.goalDiff > 0">+</span>{{fixture.prediction.goalDiff || 0}}</span></div></div></div>'),e.put("app/matches/matches.html",'<section><form data-ng-submit=vm.makePredictions() novalidate><div class=row><div class="col-md-8 col-md-offset-1 score-container date-picker"><div class=btn-group><div class="col-xs-2 btn btn-primary" ng-click=vm.prevMatchday()><i class="fa fa-chevron-left"></i></div><div class="col-xs-8 btn btn-primary" ng-click=vm.currMatchday()>Matchday {{vm.matchday}}</div><div class="col-xs-2 btn btn-primary" ng-click=vm.nextMatchday()><i class="fa fa-chevron-right"></i></div></div></div></div><div class=row ng-repeat="fixture in vm.fixtures | orderBy:\'date\'"><div class="col-md-8 col-md-offset-1 score-container"><div class="row text-center"><div class="col-xs-12 date">{{fixture.date | date:\'EEEE MMMM d y, h:mma\'}}</div></div><div class="row text-center"><div class="col-xs-3 vcentre"><img height=60px ng-src={{fixture.homeTeam.crestUrl}}><br><span style=font-size:1.4em;>{{fixture.homeTeam.name}}</span></div><div class=col-xs-6><match-prediction></match-prediction></div><div class="col-xs-3 vcentre"><img height=60px ng-src={{fixture.awayTeam.crestUrl}}><br><span style=font-size:1.4em;>{{fixture.awayTeam.name}}</span></div></div></div></div><div class=row><div class="col-md-4 col-md-offset-3"><button class="btn btn-block btn-success btn-lg btn-submit-pred" type=submit ng-if=vm.showSubmitButton()>Submit Predictions&nbsp;&nbsp;<i class="fa fa-check"></i></button> <button class="btn btn-block btn-primary btn-lg" type=button ng-if=vm.showLuckySpin() ng-click=vm.luckySpin()><i class="fa fa-star"></i> Lucky Spin</button></div></div><br><div class=row><div class="col-md-6 col-md-offset-2 score-container"><div class=row><div class="date text-center">This Week Scores</div></div><h2 class=text-center>Total Points {{vm.totalPoints}}</h2><h2 class=text-center>Goal Difference <span ng-if="vm.totalGoalDiff > 0">+</span>{{vm.totalGoalDiff}}</h2></div></div></form></section>'),e.put("app/predictions/predictions.html",'<h4>Predictions</h4><p><span>{{vm.paging.showing}}</span> <span class=pull-right>Page {{vm.paging.currentPage}} of {{vm.paging.pageCount || 1}}</span></p><table class="table table-condensed table-striped"><thead><tr><th></th><th>Kick-Off</th><th>Match</th><th>Result</th><th>Prediction</th><th>Points</th><th>Goal-Diff</th></tr></thead><tbody><tr ng-repeat="match in vm.fixtures"><td>{{((vm.paging.currentPage - 1) * vm.paging.pageSize) + $index + 1}}</td><td>{{match.date | date:\'d MMM yyyy\'}}</td><td class=text-left>{{match.homeTeam.name}} - {{match.awayTeam.name}}</td><td class=text-left>{{match.result.goalsHomeTeam}} - {{match.result.goalsAwayTeam}}</td><td class=text-left><span ng-show=!!match.prediction.choice>{{match.prediction.choice.goalsHomeTeam}} - {{match.prediction.choice.goalsAwayTeam}}</span></td><td class=text-left>{{match.prediction.points}}</td><td class=text-left>{{match.prediction.goalDiff}}</td></tr></tbody></table><ul uib-pagination total-items=vm.fixtureFilteredCount ng-model=vm.paging.currentPage max-size=vm.paging.maxPagesToShow ng-change=vm.pageChanged() class=pagination-sm boundary-link-numbers=true previous-text=Prev next-text=Next></ul>'),e.put("app/rules/rules.html",'<h4>Rules</h4><b>Scoring</b><br>Scores are calculated based on the outcome of a match and the accuracy of your prediction.<br>Points are awarded as follows:<ul><li style="list-style: none;">1) 4 points for correctly predicting the winner or draw (match-outcome).</li><li style="list-style: none;">2) 1 point for correctly predicting the goal difference</li><li style="list-style: none;">3) 1 point for each correct team score prediction.</li><li style="list-style: none;">4) 1 point for correctly predicting the actual score.</li><li style="list-style: none;">5) 1 point for each team score prediction of 2 goals or more.</li><li style="list-style: none;">6) 1 point if your match score prediction is within 1 goal of the actual score.</li></ul>(0-10 points)<br><p><b><i>Tip: Try calculator below</i></b></p><b>Aim</b><p>Each player tries to get as many points as possible, in the event of a tie, the goal difference of the two players will count. ie if two people are level on points their position in the leaderboard will be determined by goal difference</p><b>Goal difference</b><ul><li style="list-style: none;">1) For each correct number of goals you predict per team, you gain the number of goals predicted (+1 if 0).<br>&nbsp;&nbsp;&nbsp;&nbsp;e.g. you predicit 2 and the team scores 2, you gain 2 goals.</li><li style="list-style: none;">2) For each incorrect number of goals you predict per team, you lose the difference in goals.<br>&nbsp;&nbsp;&nbsp;&nbsp;e.g. you predict 3 and the team scores 1, you lose 2 goals.</li><li style="list-style: none;">3) For each correct match-outcome but incorrect final score prediction<ul><li style="list-style: none;">3.1) If difference between predicted and actual goals for a team is 1, you neither lose nor gain goals.for that team</li><li style="list-style: none;">3.2) If match goal difference and predicted goal difference is equal, you gain one goal.</li></ul></li><li style="list-style: none;">4) For each score, you gain the lower of the match and prediction absolute goal-differences (+1 if 0).</li></ul><p><b><i>Tip: Try calculator below</i></b></p><b>The Joker card</b><p>The Joker is placed on the prediction that you are most confident about and will double your points (& Gd) for that match if your goal difference is not negative.</p><b>Tip</b><br><p>For each match, predict what you think the final score will be. The closer you are to the actual result, the more points you score.<br>Play your joker on the score you think is most likely to double your points.</p><b>Calculator</b><div class=row><div class=col-md-4><table class=table><thead><tr><th></th><th>Team A</th><th>vs</th><th>Team B</th><th></th></tr></thead><tbody><tr><td><b>FINAL RESULT</b></td><td><select class=form-control ng-model=vm.homeScoreResult ng-options="g for g in vm.goalsRange" ng-change=vm.goalsChanged()></select></td><td>&nbsp;</td><td><select class=form-control ng-model=vm.awayScoreResult ng-options="g for g in vm.goalsRange" ng-change=vm.goalsChanged()></select></td><td>&nbsp;</td></tr><tr><td><b>PREDICTION</b></td><td><select class=form-control ng-model=vm.homeScorePrediction ng-options="g for g in vm.goalsRange" ng-change=vm.goalsChanged()></select></td><td>&nbsp;</td><td><select class=form-control ng-model=vm.awayScorePrediction ng-options="g for g in vm.goalsRange" ng-change=vm.goalsChanged()></select></td><td>&nbsp;</td></tr><tr><td colspan=3><p>Points: <b>{{vm.points.value}}</b>&nbsp;&nbsp;&nbsp; Goal Difference: <b><span ng-if="vm.goalDiff.value > 0">+</span>{{vm.goalDiff.value}}</b></p></td><td></td></tr><tr><td colspan=3><input type=checkbox ng-model=vm.hasJoker ng-change=vm.jokerChanged()> Joker <span class=joker-container><label><input type=checkbox name=joker ng-model=vm.hasJoker ng-if="vm.hasJoker == true" ng-change=vm.jokerChanged() ng-value=true checked> <input type=checkbox name=joker ng-model=vm.hasJoker ng-if="!vm.hasJoker == true" ng-change=vm.jokerChanged() ng-value=true> <img ng-if="!vm.hasJoker == true" src=images/Joker13.svg alt=JOKER> <img ng-if="vm.hasJoker == true" src=images/Joker14.svg alt=JOKER></label></span></td></tr><tr><td colspan=3><span ng-if="vm.hasJoker && vm.totalGoalDiff > -1">Joker (x2)</span><br><p>Points: <b>{{vm.totalPoints}}</b>&nbsp;&nbsp; Goal Difference: <b><span ng-if="vm.totalGoalDiff > 0">+</span>{{vm.totalGoalDiff}}</b></p></td></tr></tbody></table></div><div class=col-md-4><table class=table><thead><tr><th colspan=2>{{vm.points.value}} Points <span ng-if="vm.points.value > 0">(Breakdown)</span></th></tr></thead><thead><tr><th>Rule</th><th>Points</th></tr></thead><tbody><tr ng-if=0 ng-repeat-start="(key, rule) in vm.points.rules"></tr><tr ng-if=rule.show><td><i>{{rule.id}})</i>&nbsp;{{rule.name}}</td><td>{{rule.value}}</td></tr><tr ng-if=0 ng-repeat-end></tr><tr><td colspan=2><b>Total: {{vm.points.value}}</b></td></tr></tbody></table></div><div class=col-md-4><table class=table><thead><tr><th colspan=2><span ng-if="vm.goalDiff.value > 0">+</span>{{vm.goalDiff.value}} Goal-Diff (Breakdown)</th></tr></thead><thead><tr><th>Rule</th><th>Value</th></tr></thead><tbody><tr ng-if=0 ng-repeat-start="(key, rule) in vm.goalDiff.rules"></tr><tr ng-if=rule.show><td><i>{{rule.id}})</i>&nbsp;{{rule.name}}</td><td><span ng-if="rule.value != null && rule.value > 0">+</span>{{rule.value}}</td></tr><tr ng-if=0 ng-repeat-end></tr><tr><td colspan=2><b>Total: {{vm.goalDiff.value}}</b></td></tr></tbody></table></div></div>'),e.put("app/stats/stats.html",'<h4>Stats (Coming Soon!)</h4><div class="col-xs-12 col-xs-6"><nvd3 options=vm.allMatchOutcomes.options data=vm.allMatchOutcomes.data></nvd3></div>'),e.put("app/whatif/whatif.html",'<div class=col-xs-12 <div><div class=col-xs-6><h2>Fixtures</h2>Round: {{vm.season.currentRoundNumber}}<ul><li ng-repeat="match in vm.season.getCurrentRound().getMatches()"><span>{{match.getHomeTeam().getName()}}</span> <span ng-click=vm.addHomeScore(match)>{{match.getHomeScore()}}</span> <span>-</span> <span ng-click=vm.addAwayScore(match)>{{match.getAwayScore()}}</span> <span>{{match.getAwayTeam().getName()}}</span></li></ul><button ng-show=!vm.isFirstRound() ng-click=vm.prevRound()>prev</button> <button ng-show=!vm.isLastRound() ng-click=vm.nextRound()>next</button></div><div class=col-xs-6><h2>Standings</h2><p>(based on match result)</p><p>Round: {{vm.season1.currentRoundNumber}}</p><ul><li ng-repeat="team in vm.season1.getTeams()"><span>{{team.getPoints()}}</span> <span>{{team.getName()}}</span></li></ul><button ng-show=!vm.isFirstRound() ng-click=vm.prevRound()>prev</button> <button ng-show=!vm.isLastRound() ng-click=vm.nextRound()>next</button></div></div><div class=row><div class=col-xs-6><h2>Standings</h2><p>(based on your predictions)</p><p>Round: {{vm.predSeason.currentRoundNumber}}</p><ul><li ng-repeat="team in vm.predSeason.getTeams()"><span>{{team.getPoints()}}</span> <span>{{team.getName()}}</span></li></ul><button ng-show=!vm.predSeason.isFirstRound() ng-click=vm.predSeason.prevRound()>prev</button> <button ng-show=!vm.predSeason.isLastRoundPlayed() ng-click=vm.predSeason.nextRound()>next</button></div></div>'),e.put("app/admin/fixtures/fixture-detail.html","<p>{{vm.fixture}}</p>"),e.put("app/admin/fixtures/fixtures.html","<div class=row><div class=col-sm-12><div title=Fixtures subtitle={{vm.fixtures.length}}></div><table class=\"table table-condensed table-striped\"><thead><tr><th></th><th>Kick-Off</th><th>Team</th><th>Team</th><th>Score</th><th>Status</th></tr></thead><tbody><tr ng-repeat=\"fixture in vm.fixtures\"><td>{{$index + 1}}</td><td class=text-left>{{fixture.date | date:'d MMM yyyy hh:mm a'}}</td><td class=text-left>{{fixture.homeTeam.name}}</td><td class=text-left>{{fixture.awayTeam.name}}</td><td class=text-left>{{fixture.result.goalsHomeTeam + ' - ' + fixture.result.goalsAwayTeam}}</td><td class=text-left>{{fixture.status}}</td></tr><tr ng-show=!vm.fixtures.length><td colspan=6>No fixtures found</td></tr></tbody></table></div></div>"),
e.put("app/admin/leagues/league-detail.html","<div class=col-md-12><div class=col-md-6><div class=form-group><label class=control-label>Code</label><div><input class=form-control data-ng-model=vm.league.code placeholder=Code></div></div><div class=form-group><label class=control-label>Name</label><div><input class=form-control ng-model=vm.league.name placeholder=Name></div></div><div class=form-group><label class=control-label>Slug</label><div><input class=form-control ng-model=vm.league.slug placeholder=Slug></div></div></div></div>"),e.put("app/admin/leagues/leagues.html",'<div class=row><div class=col-sm-12><div title=Leagues subtitle={{vm.leagues.length}}></div><table class="table table-condensed table-striped"><thead><tr><th></th><th>Name</th><th>Code</th><th></th></tr></thead><tbody><tr data-ng-repeat="league in vm.leagues"><td>{{$index + 1}}</td><td class=text-left>{{league.name}}</td><td class=text-left>{{league.code}}</td><td class=text-left><a class=text-primary ui-sref="admin.seasons({leagueId: league.slug})"><span>Seasons</span></a></td></tr></tbody></table></div></div>'),e.put("app/admin/seasons/season-detail.html","<div class=col-md-12><div class=col-md-6><div class=form-group><label class=control-label>Name</label><div><input class=form-control ng-model=vm.season.name placeholder=Name></div></div><div class=form-group><label class=control-label>Year</label><div><input class=form-control ng-model=vm.season.year placeholder=Year></div></div></div></div>"),e.put("app/admin/seasons/season-rounds.html",'<div class=row><div class=col-sm-12><div title=Rounds subtitle={{vm.matchrounds.length}}></div><table class="table table-condensed table-striped"><thead><tr><th></th><th>Name</th><th></th></tr></thead><tbody><tr ng-repeat="round in vm.rounds"><td>{{$index + 1}}</td><td class=text-left>{{round.name}}</td><td class=text-left><a class=text-primary ui-sref="admin.season-round-fixtures({leagueId: vm.leagueId, seasonId: vm.seasonId, roundId: round.slug})"><span>Fixtures</span></a></td></tr><tr ng-show=!vm.rounds.length><td colspan=3>No match-rounds defined</td></tr></tbody></table></div></div>'),e.put("app/admin/seasons/season-teams.html",'<div class=row><div class=col-sm-12><div title=SeasonTeams subtitle={{vm.teams.length}}></div><table class="table table-condensed table-striped"><thead><tr><th></th><th>Name</th><th>Code</th></tr></thead><tbody><tr ng-repeat="team in vm.teams"><td>{{$index + 1}}</td><td class=text-left>{{team.name}}</td><td class=text-left>{{team.code}}</td></tr><tr ng-show=!vm.teams.length><td colspan=3>No teams defined</td></tr></tbody></table></div></div>'),e.put("app/admin/seasons/seasons.html",'<div class=row><div class=col-sm-12><div title=Seasons subtitle={{vm.seasons.length}}></div><table class="table table-condensed table-striped"><thead><tr><th></th><th>Name</th><th>Year</th><th></th></tr></thead><tbody><tr ng-repeat="season in vm.seasons"><td>{{$index + 1}}</td><td class=text-left>{{season.name}}</td><td class=text-left>{{season.year}}</td><td class=text-left><a class=text-primary ui-sref="admin.season-fixtures({leagueId: vm.leagueId, seasonId: season.slug, round: 1})"><span>Fixtures</span></a> &nbsp;&nbsp;&nbsp; <a class=text-primary ui-sref="admin.season-rounds({leagueId: vm.leagueId, seasonId: season.slug})"><span>Rounds</span></a> &nbsp;&nbsp;&nbsp; <a class=text-primary ui-sref="admin.season-teams({leagueId: vm.leagueId, seasonId: season.slug})"><span>Teams</span></a></td></tr><tr ng-show=!vm.seasons.length><td colspan=7>No seasons defined</td></tr></tbody></table></div></div>'),e.put("app/admin/teams/team-detail.html","<p>{{vm.team}}</p>"),e.put("app/admin/teams/team-matches.html","<p>{{vm.matches}}</p>"),e.put("app/admin/teams/teams.html",'<div class=row><div class=col-sm-12><div title=SeasonTeams subtitle={{vm.teams.length}}></div><table class="table table-condensed table-striped"><thead><tr><th></th><th>Name</th><th>Code</th></tr></thead><tbody><tr ng-repeat="team in vm.teams"><td>{{$index + 1}}</td><td class=text-left>{{team.name}}</td><td class=text-left>{{team.code}}</td></tr><tr ng-show=!vm.teams.length><td colspan=3>No teams defined</td></tr></tbody></table></div></div>'),e.put("app/admin/users/users.html","<p>{{vm.users}}</p>"),e.put("app/user/me/profile.html","")}]);